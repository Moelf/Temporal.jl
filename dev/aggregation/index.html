<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Aggregation · Temporal</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Temporal</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><span class="tocitem">Calculations</span><ul><li><a class="tocitem" href="../calculation/">Methods</a></li><li class="is-active"><a class="tocitem" href>Aggregation</a><ul class="internal"><li><a class="tocitem" href="#Sampling-1"><span>Sampling</span></a></li><li><a class="tocitem" href="#Collapsing-1"><span>Collapsing</span></a></li><li><a class="tocitem" href="#Summarizing-1"><span>Summarizing</span></a></li></ul></li></ul></li><li><span class="tocitem">Data</span><ul><li><a class="tocitem" href="../io/">I/O</a></li><li><a class="tocitem" href="../indexing/">Subsetting</a></li><li><a class="tocitem" href="../combining/">Combining</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Calculations</a></li><li class="is-active"><a href>Aggregation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Aggregation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/aggregation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Aggregation-1"><a class="docs-heading-anchor" href="#Aggregation-1">Aggregation</a><a class="docs-heading-anchor-permalink" href="#Aggregation-1" title="Permalink"></a></h1><h2 id="Sampling-1"><a class="docs-heading-anchor" href="#Sampling-1">Sampling</a><a class="docs-heading-anchor-permalink" href="#Sampling-1" title="Permalink"></a></h2><h3 id="Weekdays-1"><a class="docs-heading-anchor" href="#Weekdays-1">Weekdays</a><a class="docs-heading-anchor-permalink" href="#Weekdays-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Temporal.mondays" href="#Temporal.mondays"><code>Temporal.mondays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">mondays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Mondays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L24-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.tuesdays" href="#Temporal.tuesdays"><code>Temporal.tuesdays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">tuesdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Tuesdays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.wednesdays" href="#Temporal.wednesdays"><code>Temporal.wednesdays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">wednesdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Wednesdays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.thursdays" href="#Temporal.thursdays"><code>Temporal.thursdays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">thursdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Thursdays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L45-L49">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.fridays" href="#Temporal.fridays"><code>Temporal.fridays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fridays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Fridays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.saturdays" href="#Temporal.saturdays"><code>Temporal.saturdays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">saturdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Saturdays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.sundays" href="#Temporal.sundays"><code>Temporal.sundays</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">sundays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Sundays of the given <code>TS</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L66-L70">source</a></section></article><h3 id="Interval-Boundaries-1"><a class="docs-heading-anchor" href="#Interval-Boundaries-1">Interval Boundaries</a><a class="docs-heading-anchor-permalink" href="#Interval-Boundaries-1" title="Permalink"></a></h3><h4 id="Weekly-1"><a class="docs-heading-anchor" href="#Weekly-1">Weekly</a><a class="docs-heading-anchor-permalink" href="#Weekly-1" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="Temporal.bow" href="#Temporal.bow"><code>Temporal.bow</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">bow(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the weeks of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the week are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior week are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L85-L92">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.eow" href="#Temporal.eow"><code>Temporal.eow</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">eow(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the weeks of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the week are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new week are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L95-L102">source</a></section></article><h4 id="Monthly-1"><a class="docs-heading-anchor" href="#Monthly-1">Monthly</a><a class="docs-heading-anchor-permalink" href="#Monthly-1" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="Temporal.bom" href="#Temporal.bom"><code>Temporal.bom</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">bom(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the months of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the month are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior month are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L105-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.eom" href="#Temporal.eom"><code>Temporal.eom</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">eom(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the months of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the month are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new month are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L115-L122">source</a></section></article><h4 id="Quarterly-1"><a class="docs-heading-anchor" href="#Quarterly-1">Quarterly</a><a class="docs-heading-anchor-permalink" href="#Quarterly-1" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="Temporal.boq" href="#Temporal.boq"><code>Temporal.boq</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">boq(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the quarters of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the quarter are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior quarter are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L125-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.eoq" href="#Temporal.eoq"><code>Temporal.eoq</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">eoq(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the quarters of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the quarter are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new quarter are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L135-L142">source</a></section></article><h4 id="Yearly-1"><a class="docs-heading-anchor" href="#Yearly-1">Yearly</a><a class="docs-heading-anchor-permalink" href="#Yearly-1" title="Permalink"></a></h4><article class="docstring"><header><a class="docstring-binding" id="Temporal.boy" href="#Temporal.boy"><code>Temporal.boy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">boy(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the years of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the year are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior year are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L145-L152">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Temporal.eoy" href="#Temporal.eoy"><code>Temporal.eoy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">eoy(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the years of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the year are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new year are returned</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L155-L162">source</a></section></article><h2 id="Collapsing-1"><a class="docs-heading-anchor" href="#Collapsing-1">Collapsing</a><a class="docs-heading-anchor-permalink" href="#Collapsing-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Temporal.collapse" href="#Temporal.collapse"><code>Temporal.collapse</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">collapse(x::TS, at::Function; fun::Function=last, args...)::TS</code></pre><p>Compute the function <code>fun</code> over period boundaries defined by <code>at</code> (e.g. <code>eom</code>, <code>boq</code>, etc.) and returng a time series of the results.</p><p>Keyword arguments (<code>args...</code>) are passed to the function <code>fun</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L184-L190">source</a></section></article><pre><code class="language-julia-repl">julia&gt; using Temporal, Statistics, Dates

julia&gt; X = TS(randn(100, 4))
100x4 TS{Float64,Dates.Date}: 2019-10-15 to 2020-01-22

Index       A        B        C        D
2019-10-15  -0.1866  -0.84    -0.1397  2.2043
2019-10-16  0.7517   -0.8447  -0.5989  -1.4443
2019-10-17  -1.8092  0.0303   0.6289   -1.8995
2019-10-18  -1.1157  1.3227   1.0881   0.283
2019-10-19  2.3262   -1.0653  0.8624   -1.4475
2019-10-20  -1.3373  -0.8158  -0.7763  1.7431
2019-10-21  -1.4505  0.7358   -1.1379  -0.2587
⋮
2020-01-15  -1.2701  0.0881   0.3331   0.3654
2020-01-16  -0.547   -0.656   0.3009   1.12
2020-01-17  -0.0798  -1.5292  -1.2675  0.8403
2020-01-18  1.0677   -0.1692  -0.229   -0.8929
2020-01-19  0.2681   -0.5048  0.569    -0.0101
2020-01-20  2.202    0.171    0.1568   -0.8425
2020-01-21  1.1247   -0.882   -1.7938  1.926
2020-01-22  0.0681   -1.7146  1.472    -0.6442

julia&gt; collapse(X, eom, fun=mean)
3x4 TS{Float64,Dates.Date}: 2019-10-31 to 2019-12-31

Index       A        B        C        D
2019-10-31  0.1631   0.0517   0.0729   -0.1831
2019-11-30  -0.0219  0.0558   0.4351   0.0572
2019-12-31  -0.0135  -0.0714  -0.0587  0.1542

julia&gt; last_month = string(X.index[end])[1:7]
&quot;2020-01&quot;

julia&gt; mean(X[last_month])
-0.0264185897272492</code></pre><h2 id="Summarizing-1"><a class="docs-heading-anchor" href="#Summarizing-1">Summarizing</a><a class="docs-heading-anchor-permalink" href="#Summarizing-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Temporal.apply" href="#Temporal.apply"><code>Temporal.apply</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">apply(x::TS, dim::Int=1; fun::Function=sum)</code></pre><p>Apply function <code>fun</code> across dimension <code>dim</code> of a time series <code>x</code>.</p><ul><li>If <code>dim</code> is 1, then apply <code>fun</code> to each row of <code>x</code>, returning a time series (<code>TS</code>) object of the results</li><li>If <code>dim</code> is 2, then apply <code>fun</code> to each column of <code>x</code>, returning an <code>Array</code> of the results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/2b1ea2fcb4e904f1a7b7b8c12278683e06e8e6b5/src/data/collapse.jl#L196-L203">source</a></section></article><pre><code class="language-julia-repl">julia&gt; using Temporal, Statistics

julia&gt; X = TS(randn(100, 4))
100x4 TS{Float64,Dates.Date}: 2019-10-15 to 2020-01-22

Index       A        B        C        D
2019-10-15  -0.9595  0.1335   -1.0634  0.2979
2019-10-16  -0.5834  1.2348   -0.744   0.2918
2019-10-17  1.2931   -1.4254  -0.653   -0.2039
2019-10-18  0.8427   1.3852   0.8431   0.243
2019-10-19  -0.8869  1.131    -0.2246  0.6173
2019-10-20  1.2795   0.7889   -1.2842  1.0755
2019-10-21  -2.2764  1.0616   0.6205   -0.0099
⋮
2020-01-15  -0.5043  -1.3508  -0.1313  -0.9573
2020-01-16  -1.485   1.021    -1.9404  0.9268
2020-01-17  0.8451   -1.4235  0.3153   -0.0515
2020-01-18  -0.1652  0.1091   -0.1821  -2.225
2020-01-19  -0.2702  1.1492   0.7934   1.5887
2020-01-20  -0.2894  0.3906   0.817    0.9331
2020-01-21  -0.4678  -0.7675  -1.7152  0.4977
2020-01-22  -0.2223  -0.5855  -0.5913  -0.5921

julia&gt; apply(X, 1, fun=sum)
100x1 TS{Float64,Dates.Date}: 2019-10-15 to 2020-01-22

Index       Sum
2019-10-15  -1.5915
2019-10-16  0.1992
2019-10-17  -0.9892
2019-10-18  3.3139
2019-10-19  0.6368
2019-10-20  1.8597
2019-10-21  -0.6042
⋮
2020-01-15  -2.9437
2020-01-16  -1.4776
2020-01-17  -0.3146
2020-01-18  -2.4633
2020-01-19  3.261
2020-01-20  1.8512
2020-01-21  -2.4528
2020-01-22  -1.9912

julia&gt; apply(X, 2, fun=sum)
1×4 LinearAlgebra.Adjoint{Float64,Array{Float64,1}}:
 -8.12431  5.90707  9.15881  0.403375</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../calculation/">« Methods</a><a class="docs-footer-nextpage" href="../io/">I/O »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 22 January 2020 04:10">Wednesday 22 January 2020</span>. Using Julia version 1.2.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
