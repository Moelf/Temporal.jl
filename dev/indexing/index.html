<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A         B         C         D
2019-02-21  100.2818  100.3013  100.9605  101.6722
2019-02-22  99.7895   99.8222   100.9506  100.8273
2019-02-23  99.906    99.3777   101.1351  102.0518
2019-02-24  99.1573   100.1597  100.8787  100.5924
2019-02-25  99.1531   99.615    102.4146  100.0998
2019-02-26  99.1366   97.9074   101.8358  101.4127
2019-02-27  98.5669   99.688    99.8574   102.0215
⋮
2019-10-23  124.9052  83.7572   118.1862  133.373
2019-10-24  125.3421  84.4162   116.4501  131.8539
2019-10-25  126.8458  84.0154   115.1955  131.1896
2019-10-26  126.3913  83.2515   114.6641  131.9244
2019-10-27  125.0447  83.028    113.6306  131.4661
2019-10-28  125.1741  83.4393   113.8848  129.8829
2019-10-29  124.735   84.9941   114.4617  131.8907
2019-10-30  125.5874  83.9961   114.761   131.0079

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-02-21

Index       A         B         C         D
2019-02-21  100.2818  100.3013  100.9605  101.6722

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-02-21

Index       A         B         C         D
2019-02-21  100.2818  100.3013  100.9605  101.6722

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A
2019-02-21  100.2818
2019-02-22  99.7895
2019-02-23  99.906
2019-02-24  99.1573
2019-02-25  99.1531
2019-02-26  99.1366
2019-02-27  98.5669
⋮
2019-10-23  124.9052
2019-10-24  125.3421
2019-10-25  126.8458
2019-10-26  126.3913
2019-10-27  125.0447
2019-10-28  125.1741
2019-10-29  124.735
2019-10-30  125.5874

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2019-02-21 to 2019-02-21

Index       A
2019-02-21  100.2818</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A         B         C         D
2019-02-21  100.2362  99.3307   98.3543   99.3159
2019-02-22  99.9781   99.57     100.4965  99.3301
2019-02-23  99.3417   99.0155   101.2167  99.2226
2019-02-24  100.5171  100.2543  100.3069  98.6021
2019-02-25  101.877   101.0543  101.4495  97.0126
2019-02-26  100.715   100.0421  101.0758  95.2108
2019-02-27  101.1957  98.7933   101.3135  95.9882
⋮
2019-10-23  114.9388  107.7591  103.5831  90.0997
2019-10-24  114.3166  109.6032  103.8592  90.7427
2019-10-25  114.4382  108.4627  102.7437  91.2224
2019-10-26  114.0568  108.9163  103.7815  91.931
2019-10-27  112.0482  107.0223  103.3443  92.7287
2019-10-28  110.9626  106.5513  103.9391  93.7563
2019-10-29  111.854   106.9839  103.3174  93.2982
2019-10-30  113.5995  106.4683  102.5201  91.722

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A         B         C         D
2019-02-21  100.2362  99.3307   98.3543   99.3159
2019-02-22  99.9781   99.57     100.4965  99.3301
2019-02-23  99.3417   99.0155   101.2167  99.2226
2019-02-24  100.5171  100.2543  100.3069  98.6021
2019-02-25  101.877   101.0543  101.4495  97.0126
2019-02-26  100.715   100.0421  101.0758  95.2108
2019-02-27  101.1957  98.7933   101.3135  95.9882
⋮
2019-10-23  114.9388  107.7591  103.5831  90.0997
2019-10-24  114.3166  109.6032  103.8592  90.7427
2019-10-25  114.4382  108.4627  102.7437  91.2224
2019-10-26  114.0568  108.9163  103.7815  91.931
2019-10-27  112.0482  107.0223  103.3443  92.7287
2019-10-28  110.9626  106.5513  103.9391  93.7563
2019-10-29  111.854   106.9839  103.3174  93.2982
2019-10-30  113.5995  106.4683  102.5201  91.722

julia&gt; X[rand(Bool, size(X,1)), 1]
118x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-30

Index       A
2019-02-22  99.9781
2019-02-24  100.5171
2019-02-26  100.715
2019-03-03  99.3694
2019-03-04  99.0758
2019-03-05  100.7462
2019-03-07  102.0765
⋮
2019-10-17  110.1329
2019-10-18  112.3732
2019-10-19  113.5271
2019-10-23  114.9388
2019-10-25  114.4382
2019-10-26  114.0568
2019-10-29  111.854
2019-10-30  113.5995

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
128x1 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A
2019-02-21  100.2362
2019-02-25  101.877
2019-02-26  100.715
2019-02-27  101.1957
2019-03-07  102.0765
2019-03-10  100.4769
2019-03-11  101.3203
⋮
2019-10-09  113.0458
2019-10-10  115.0583
2019-10-17  110.1329
2019-10-21  112.5981
2019-10-27  112.0482
2019-10-28  110.9626
2019-10-29  111.854
2019-10-30  113.5995</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A         B         C         D
2019-02-21  102.3727  98.2861   100.8589  99.8249
2019-02-22  102.2133  97.3316   101.2346  99.8741
2019-02-23  102.9941  97.6925   100.6846  99.6398
2019-02-24  105.0598  98.8783   101.68    100.5871
2019-02-25  105.4978  99.4646   103.6072  100.8352
2019-02-26  106.5787  97.5867   103.6466  100.2171
2019-02-27  106.6278  97.0391   100.8449  99.8626
⋮
2019-10-23  109.2443  87.2468   111.1552  81.5862
2019-10-24  109.3081  87.4941   110.4062  83.0261
2019-10-25  107.9423  87.0043   110.5697  83.6052
2019-10-26  108.5809  86.9217   111.0355  82.7647
2019-10-27  110.5665  87.4096   111.1859  80.9627
2019-10-28  109.9     85.7486   109.8587  80.7783
2019-10-29  108.736   84.3711   109.3684  81.5753
2019-10-30  107.2887  84.5492   109.0542  81.925

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-03-02

Index       A         B        C         D
2019-02-21  102.3727  98.2861  100.8589  99.8249
2019-02-22  102.2133  97.3316  101.2346  99.8741
2019-02-23  102.9941  97.6925  100.6846  99.6398
2019-02-24  105.0598  98.8783  101.68    100.5871
2019-02-25  105.4978  99.4646  103.6072  100.8352
2019-02-26  106.5787  97.5867  103.6466  100.2171
2019-02-27  106.6278  97.0391  100.8449  99.8626
2019-02-28  107.9681  97.1437  101.0651  99.2034
2019-03-01  107.815   96.7698  100.8456  97.4674
2019-03-02  107.064   98.68    100.4355  97.1935

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2019-07-22 to 2019-10-30

Index       B        C
2019-07-22  95.0677  105.1681
2019-07-23  95.583   104.6858
2019-07-24  95.0321  105.9621
2019-07-25  94.2985  106.3298
2019-07-26  94.8724  105.7569
2019-07-27  95.6497  106.1596
2019-07-28  95.5029  106.6805
⋮
2019-10-23  87.2468  111.1552
2019-10-24  87.4941  110.4062
2019-10-25  87.0043  110.5697
2019-10-26  86.9217  111.0355
2019-10-27  87.4096  111.1859
2019-10-28  85.7486  109.8587
2019-10-29  84.3711  109.3684
2019-10-30  84.5492  109.0542

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-10-30 to 2019-10-30

Index       B        C         D
2019-10-30  84.5492  109.0542  81.925</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A         B         C         D
2019-02-21  99.8698   99.7317   100.5163  98.0998
2019-02-22  99.6802   99.9552   100.6198  98.1101
2019-02-23  100.6372  99.9254   101.6232  98.0397
2019-02-24  101.3025  101.1292  101.5938  97.7857
2019-02-25  102.0051  101.4543  101.8595  97.0317
2019-02-26  102.0148  103.0001  102.4002  98.4625
2019-02-27  102.9573  101.576   103.2678  98.5656
⋮
2019-10-23  100.723   99.2727   115.8951  105.2979
2019-10-24  99.3696   98.4754   117.7066  107.3434
2019-10-25  100.7377  98.6275   116.7778  109.4338
2019-10-26  98.7734   99.1532   117.4917  108.4529
2019-10-27  97.9867   100.0576  119.2981  109.3775
2019-10-28  96.652    101.4744  120.6549  109.8181
2019-10-29  96.6476   100.9839  121.4892  110.4788
2019-10-30  95.9741   102.6698  120.1134  109.8297

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       A
2019-02-21  99.8698
2019-02-22  99.6802
2019-02-23  100.6372
2019-02-24  101.3025
2019-02-25  102.0051
2019-02-26  102.0148
2019-02-27  102.9573
⋮
2019-10-23  100.723
2019-10-24  99.3696
2019-10-25  100.7377
2019-10-26  98.7734
2019-10-27  97.9867
2019-10-28  96.652
2019-10-29  96.6476
2019-10-30  95.9741

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2019-02-21 to 2019-10-30

Index       B         D
2019-02-21  99.7317   98.0998
2019-02-22  99.9552   98.1101
2019-02-23  99.9254   98.0397
2019-02-24  101.1292  97.7857
2019-02-25  101.4543  97.0317
2019-02-26  103.0001  98.4625
2019-02-27  101.576   98.5656
⋮
2019-10-23  99.2727   105.2979
2019-10-24  98.4754   107.3434
2019-10-25  98.6275   109.4338
2019-10-26  99.1532   108.4529
2019-10-27  100.0576  109.3775
2019-10-28  101.4744  109.8181
2019-10-29  100.9839  110.4788
2019-10-30  102.6698  109.8297</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  100.9973  101.2947  99.3423   99.7915
2016-01-02  101.2071  101.6812  100.0754  99.7632
2016-01-03  101.4378  102.1744  100.1881  99.2881
2016-01-04  101.3563  101.456   100.698   97.8221
2016-01-05  99.9925   99.9211   100.8307  95.8035
2016-01-06  100.6952  99.9844   101.0068  95.4325
2016-01-07  99.5972   99.5913   101.3429  95.7859
⋮
2017-12-24  131.7046  153.4478  123.062   113.8954
2017-12-25  132.5359  152.5446  124.4595  114.5565
2017-12-26  132.0856  151.995   125.3241  115.2165
2017-12-27  133.0624  151.223   124.7978  115.3575
2017-12-28  133.2014  149.9363  124.4918  117.1907
2017-12-29  133.5645  149.0958  123.5077  116.7665
2017-12-30  132.3022  147.8399  124.2122  117.0696
2017-12-31  131.2061  147.9573  125.1825  116.5397

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B         C         D
2017-07-01  137.1769  150.0189  126.3706  83.0298

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  100.9973  101.2947  99.3423   99.7915
2016-01-02  101.2071  101.6812  100.0754  99.7632
2016-01-03  101.4378  102.1744  100.1881  99.2881
2016-01-04  101.3563  101.456   100.698   97.8221
2016-01-05  99.9925   99.9211   100.8307  95.8035
2016-01-06  100.6952  99.9844   101.0068  95.4325
2016-01-07  99.5972   99.5913   101.3429  95.7859
⋮
2016-12-24  116.5488  142.1753  119.3928  87.6274
2016-12-25  116.4943  141.5384  119.2986  88.0166
2016-12-26  116.9772  139.2623  120.9199  88.6172
2016-12-27  118.1355  138.5653  122.9118  90.1764
2016-12-28  118.0614  138.4318  123.6435  88.1732
2016-12-29  115.8066  138.7581  123.336   86.7149
2016-12-30  115.3055  138.0542  124.1363  87.8189
2016-12-31  116.3682  136.7183  124.2666  86.7167

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
473x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-12-31

Index       A         B         C         D
2016-09-15  116.2526  121.6284  110.4001  100.7365
2016-09-16  117.4561  120.9735  111.7631  99.5854
2016-09-17  117.319   122.1295  113.968   98.518
2016-09-18  118.6541  120.4895  114.701   97.4841
2016-09-19  119.2326  121.1401  114.816   95.5839
2016-09-20  118.2368  122.0482  115.1369  95.7924
2016-09-21  119.1199  119.387   115.5528  94.955
⋮
2017-12-24  131.7046  153.4478  123.062   113.8954
2017-12-25  132.5359  152.5446  124.4595  114.5565
2017-12-26  132.0856  151.995   125.3241  115.2165
2017-12-27  133.0624  151.223   124.7978  115.3575
2017-12-28  133.2014  149.9363  124.4918  117.1907
2017-12-29  133.5645  149.0958  123.5077  116.7665
2017-12-30  132.3022  147.8399  124.2122  117.0696
2017-12-31  131.2061  147.9573  125.1825  116.5397

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
548x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-07-01

Index       A         B         C         D
2016-01-01  100.9973  101.2947  99.3423   99.7915
2016-01-02  101.2071  101.6812  100.0754  99.7632
2016-01-03  101.4378  102.1744  100.1881  99.2881
2016-01-04  101.3563  101.456   100.698   97.8221
2016-01-05  99.9925   99.9211   100.8307  95.8035
2016-01-06  100.6952  99.9844   101.0068  95.4325
2016-01-07  99.5972   99.5913   101.3429  95.7859
⋮
2017-06-24  136.7052  152.0841  127.7203  83.9348
2017-06-25  136.6635  153.588   127.4923  83.8095
2017-06-26  137.3166  153.8548  126.2413  83.078
2017-06-27  135.3714  152.829   126.0488  82.7441
2017-06-28  136.2668  152.2154  125.3124  82.9965
2017-06-29  136.2779  152.0897  124.8121  83.4874
2017-06-30  137.2383  150.9591  125.1465  83.2422
2017-07-01  137.1769  150.0189  126.3706  83.0298

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
290x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-07-01

Index       A         B         C         D
2016-09-15  116.2526  121.6284  110.4001  100.7365
2016-09-16  117.4561  120.9735  111.7631  99.5854
2016-09-17  117.319   122.1295  113.968   98.518
2016-09-18  118.6541  120.4895  114.701   97.4841
2016-09-19  119.2326  121.1401  114.816   95.5839
2016-09-20  118.2368  122.0482  115.1369  95.7924
2016-09-21  119.1199  119.387   115.5528  94.955
⋮
2017-06-24  136.7052  152.0841  127.7203  83.9348
2017-06-25  136.6635  153.588   127.4923  83.8095
2017-06-26  137.3166  153.8548  126.2413  83.078
2017-06-27  135.3714  152.829   126.0488  82.7441
2017-06-28  136.2668  152.2154  125.3124  82.9965
2017-06-29  136.2779  152.0897  124.8121  83.4874
2017-06-30  137.2383  150.9591  125.1465  83.2422
2017-07-01  137.1769  150.0189  126.3706  83.0298</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
