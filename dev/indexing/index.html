<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  99.1048   99.1775   100.2868  101.4617
2018-07-11  98.1343   100.2396  99.8113   101.1929
2018-07-12  97.369    98.2523   100.4148  100.0445
2018-07-13  98.6462   96.2172   99.9519   99.6155
2018-07-14  100.0037  96.527    101.5212  98.4708
2018-07-15  98.4738   98.0872   100.8155  98.7317
2018-07-16  100.5442  98.7038   101.1852  97.8928
⋮
2019-03-11  87.544    104.7379  72.0585   109.9593
2019-03-12  87.688    105.13    73.7749   109.9152
2019-03-13  86.6551   106.1491  75.5656   109.7781
2019-03-14  87.9707   104.7991  73.3374   110.9959
2019-03-15  86.2492   105.2926  74.0896   109.7645
2019-03-16  86.0265   103.6849  74.7808   111.2782
2019-03-17  85.657    103.6     75.7689   109.8897
2019-03-18  84.9998   103.7478  76.421    109.5457

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A        B        C         D
2018-07-10  99.1048  99.1775  100.2868  101.4617

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A        B        C         D
2018-07-10  99.1048  99.1775  100.2868  101.4617

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A
2018-07-10  99.1048
2018-07-11  98.1343
2018-07-12  97.369
2018-07-13  98.6462
2018-07-14  100.0037
2018-07-15  98.4738
2018-07-16  100.5442
⋮
2019-03-11  87.544
2019-03-12  87.688
2019-03-13  86.6551
2019-03-14  87.9707
2019-03-15  86.2492
2019-03-16  86.0265
2019-03-17  85.657
2019-03-18  84.9998

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A
2018-07-10  99.1048</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  100.155   99.1291   100.9296  101.4642
2018-07-11  100.6769  99.364    100.3003  101.5985
2018-07-12  99.792    100.5902  101.3452  101.9709
2018-07-13  99.949    102.0257  101.4218  101.1991
2018-07-14  100.0761  101.9026  101.7618  101.9946
2018-07-15  100.9885  102.6364  102.0965  102.8501
2018-07-16  102.2833  101.7381  103.2033  102.5286
⋮
2019-03-11  92.3137   114.0784  99.7686   132.6041
2019-03-12  91.6013   112.5697  99.4072   131.6919
2019-03-13  91.2507   112.9146  100.1022  131.3599
2019-03-14  91.0248   111.6789  100.4764  131.7912
2019-03-15  91.9811   111.4186  99.6629   132.0804
2019-03-16  90.6166   110.3172  102.0013  132.4487
2019-03-17  90.196    110.5042  102.5377  133.4544
2019-03-18  91.5412   110.4862  100.9441  132.6116

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  100.155   99.1291   100.9296  101.4642
2018-07-11  100.6769  99.364    100.3003  101.5985
2018-07-12  99.792    100.5902  101.3452  101.9709
2018-07-13  99.949    102.0257  101.4218  101.1991
2018-07-14  100.0761  101.9026  101.7618  101.9946
2018-07-15  100.9885  102.6364  102.0965  102.8501
2018-07-16  102.2833  101.7381  103.2033  102.5286
⋮
2019-03-11  92.3137   114.0784  99.7686   132.6041
2019-03-12  91.6013   112.5697  99.4072   131.6919
2019-03-13  91.2507   112.9146  100.1022  131.3599
2019-03-14  91.0248   111.6789  100.4764  131.7912
2019-03-15  91.9811   111.4186  99.6629   132.0804
2019-03-16  90.6166   110.3172  102.0013  132.4487
2019-03-17  90.196    110.5042  102.5377  133.4544
2019-03-18  91.5412   110.4862  100.9441  132.6116

julia&gt; X[rand(Bool, size(X,1)), 1]
125x1 TS{Float64,Dates.Date}: 2018-07-12 to 2019-03-16

Index       A
2018-07-12  99.792
2018-07-14  100.0761
2018-07-15  100.9885
2018-07-16  102.2833
2018-07-18  101.5306
2018-07-19  100.2073
2018-07-22  100.8243
⋮
2019-03-06  93.9505
2019-03-07  94.0549
2019-03-08  94.6709
2019-03-12  91.6013
2019-03-13  91.2507
2019-03-14  91.0248
2019-03-15  91.9811
2019-03-16  90.6166

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
112x1 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A
2018-07-10  100.155
2018-07-13  99.949
2018-07-16  102.2833
2018-07-19  100.2073
2018-07-21  101.7574
2018-07-25  99.1295
2018-07-26  99.0889
⋮
2019-03-02  94.3871
2019-03-05  93.5294
2019-03-08  94.6709
2019-03-11  92.3137
2019-03-14  91.0248
2019-03-15  91.9811
2019-03-16  90.6166
2019-03-18  91.5412</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  100.9797  98.9532   100.867   98.3381
2018-07-11  99.4582   98.1001   102.5815  98.2086
2018-07-12  98.7081   99.2904   103.7035  99.7108
2018-07-13  99.8561   99.6161   103.1203  100.1831
2018-07-14  100.3213  100.979   103.0968  99.586
2018-07-15  102.0651  99.7948   102.8478  100.7243
2018-07-16  101.6907  100.6153  102.796   102.9766
⋮
2019-03-11  128.7203  85.5516   103.476   100.7422
2019-03-12  129.4538  86.1322   103.5169  101.6489
2019-03-13  130.3462  85.2634   103.0141  102.3814
2019-03-14  129.5611  85.2353   101.6104  103.2391
2019-03-15  129.5214  85.8      101.5182  102.998
2019-03-16  129.1467  86.7985   101.7999  103.4087
2019-03-17  127.672   88.9522   101.4657  104.6292
2019-03-18  126.994   88.6835   101.0362  104.5006

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-19

Index       A         B         C         D
2018-07-10  100.9797  98.9532   100.867   98.3381
2018-07-11  99.4582   98.1001   102.5815  98.2086
2018-07-12  98.7081   99.2904   103.7035  99.7108
2018-07-13  99.8561   99.6161   103.1203  100.1831
2018-07-14  100.3213  100.979   103.0968  99.586
2018-07-15  102.0651  99.7948   102.8478  100.7243
2018-07-16  101.6907  100.6153  102.796   102.9766
2018-07-17  100.9486  101.9382  103.9103  103.3936
2018-07-18  100.4478  100.8545  103.5602  104.2733
2018-07-19  99.2183   99.9363   104.456   103.0734

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-12-08 to 2019-03-18

Index       B        C
2018-12-08  84.3281  103.7639
2018-12-09  84.3727  104.8719
2018-12-10  86.0011  103.5094
2018-12-11  84.994   103.5845
2018-12-12  86.284   103.944
2018-12-13  85.1833  103.5057
2018-12-14  83.7311  104.8039
⋮
2019-03-11  85.5516  103.476
2019-03-12  86.1322  103.5169
2019-03-13  85.2634  103.0141
2019-03-14  85.2353  101.6104
2019-03-15  85.8     101.5182
2019-03-16  86.7985  101.7999
2019-03-17  88.9522  101.4657
2019-03-18  88.6835  101.0362

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-03-18 to 2019-03-18

Index       B        C         D
2019-03-18  88.6835  101.0362  104.5006</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  101.1909  101.4613  100.5704  100.2961
2018-07-11  100.5073  100.2424  100.2445  101.599
2018-07-12  100.9555  102.3879  98.9668   99.5001
2018-07-13  99.6278   103.3899  100.1129  101.3128
2018-07-14  98.952    101.7246  100.3572  102.4926
2018-07-15  96.9895   100.582   100.502   104.6367
2018-07-16  95.5143   100.8569  100.554   104.3724
⋮
2019-03-11  109.3038  75.764    82.5314   104.9458
2019-03-12  109.3888  75.4632   83.3451   104.6
2019-03-13  109.8195  74.377    83.6577   104.0376
2019-03-14  109.7781  73.5248   84.0549   103.5409
2019-03-15  109.9832  74.4488   81.2441   101.6868
2019-03-16  110.2581  72.5586   80.2979   101.7107
2019-03-17  109.2337  73.7654   80.8415   102.8027
2019-03-18  106.7596  74.1548   81.9903   103.1482

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A
2018-07-10  101.1909
2018-07-11  100.5073
2018-07-12  100.9555
2018-07-13  99.6278
2018-07-14  98.952
2018-07-15  96.9895
2018-07-16  95.5143
⋮
2019-03-11  109.3038
2019-03-12  109.3888
2019-03-13  109.8195
2019-03-14  109.7781
2019-03-15  109.9832
2019-03-16  110.2581
2019-03-17  109.2337
2019-03-18  106.7596

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       B         D
2018-07-10  101.4613  100.2961
2018-07-11  100.2424  101.599
2018-07-12  102.3879  99.5001
2018-07-13  103.3899  101.3128
2018-07-14  101.7246  102.4926
2018-07-15  100.582   104.6367
2018-07-16  100.8569  104.3724
⋮
2019-03-11  75.764    104.9458
2019-03-12  75.4632   104.6
2019-03-13  74.377    104.0376
2019-03-14  73.5248   103.5409
2019-03-15  74.4488   101.6868
2019-03-16  72.5586   101.7107
2019-03-17  73.7654   102.8027
2019-03-18  74.1548   103.1482</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B        C         D
2016-01-01  98.5973   99.5524  100.3607  99.1047
2016-01-02  97.9445   97.7861  99.7617   100.2055
2016-01-03  98.8468   97.0433  101.0505  98.5586
2016-01-04  97.8511   96.0408  100.6091  100.9544
2016-01-05  98.4116   95.5893  101.4627  101.0924
2016-01-06  96.8145   95.1996  101.1553  101.5501
2016-01-07  96.8465   94.7498  99.4669   102.2803
⋮
2017-12-24  126.2482  81.0244  91.0237   142.6992
2017-12-25  125.7142  79.324   90.7298   142.8689
2017-12-26  124.3346  79.7228  91.0667   142.8963
2017-12-27  125.9131  82.2639  92.0418   142.8235
2017-12-28  126.8833  82.0429  92.6033   143.1693
2017-12-29  125.5611  81.3399  90.5916   142.5263
2017-12-30  127.1905  81.5748  89.2274   142.0759
2017-12-31  127.4083  82.0959  88.0863   141.9305

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B      C        D
2017-07-01  102.8895  62.19  96.1089  134.8564

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B        C         D
2016-01-01  98.5973   99.5524  100.3607  99.1047
2016-01-02  97.9445   97.7861  99.7617   100.2055
2016-01-03  98.8468   97.0433  101.0505  98.5586
2016-01-04  97.8511   96.0408  100.6091  100.9544
2016-01-05  98.4116   95.5893  101.4627  101.0924
2016-01-06  96.8145   95.1996  101.1553  101.5501
2016-01-07  96.8465   94.7498  99.4669   102.2803
⋮
2016-12-24  92.3579   65.7445  105.6874  114.9527
2016-12-25  92.9079   66.0079  107.0341  114.3517
2016-12-26  94.268    66.4062  106.1416  115.3958
2016-12-27  94.452    65.4623  107.1091  115.0028
2016-12-28  94.8797   66.5766  104.9918  115.3957
2016-12-29  94.5302   65.4084  104.1879  112.7517
2016-12-30  93.6434   66.123   104.5768  111.766
2016-12-31  93.084    66.1729  105.7759  111.8886

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
