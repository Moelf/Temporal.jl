<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A         B         C         D
2018-06-07  100.6505  100.0709  99.7553   100.6257
2018-06-08  100.8562  100.3625  100.0471  100.8187
2018-06-09  99.7166   100.5331  100.6097  98.8159
2018-06-10  100.1924  100.1109  99.9316   100.0342
2018-06-11  100.788   100.4402  101.2754  99.0553
2018-06-12  101.5728  99.5488   102.1591  97.6488
2018-06-13  101.8319  101.4748  102.3491  99.2835
⋮
2019-02-06  87.2091   75.9925   111.5484  122.7981
2019-02-07  87.8487   76.134    110.355   122.5682
2019-02-08  87.7723   75.6918   110.4815  121.8169
2019-02-09  87.9601   75.7949   112.7822  120.2485
2019-02-10  87.8391   76.1938   113.2901  119.2495
2019-02-11  87.8825   77.037    112.4647  119.8167
2019-02-12  85.5276   77.0613   111.0359  119.3364
2019-02-13  85.7533   77.289    111.4298  118.4647

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-06-07 to 2018-06-07

Index       A         B         C        D
2018-06-07  100.6505  100.0709  99.7553  100.6257

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-06-07 to 2018-06-07

Index       A         B         C        D
2018-06-07  100.6505  100.0709  99.7553  100.6257

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A
2018-06-07  100.6505
2018-06-08  100.8562
2018-06-09  99.7166
2018-06-10  100.1924
2018-06-11  100.788
2018-06-12  101.5728
2018-06-13  101.8319
⋮
2019-02-06  87.2091
2019-02-07  87.8487
2019-02-08  87.7723
2019-02-09  87.9601
2019-02-10  87.8391
2019-02-11  87.8825
2019-02-12  85.5276
2019-02-13  85.7533

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-06-07 to 2018-06-07

Index       A
2018-06-07  100.6505</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A         B         C         D
2018-06-07  100.435   98.5459   102.277   102.159
2018-06-08  99.5848   100.3484  102.7549  102.1362
2018-06-09  100.6851  98.901    105.2869  102.0494
2018-06-10  99.7135   99.9302   104.0121  101.0517
2018-06-11  99.1671   100.1283  104.0371  102.1618
2018-06-12  99.1959   101.4645  104.6458  104.0809
2018-06-13  101.9598  101.4914  105.0691  104.4907
⋮
2019-02-06  101.1773  98.5913   125.2685  110.717
2019-02-07  101.6806  99.2934   125.6279  110.0123
2019-02-08  101.2667  98.3068   124.1161  110.2624
2019-02-09  98.952    97.7876   124.1708  111.5769
2019-02-10  100.9657  96.0141   123.1344  110.9043
2019-02-11  100.2774  96.794    124.3477  110.8611
2019-02-12  100.4158  96.5768   124.2366  112.0445
2019-02-13  100.058   96.8445   122.652   111.9338

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A         B         C         D
2018-06-07  100.435   98.5459   102.277   102.159
2018-06-08  99.5848   100.3484  102.7549  102.1362
2018-06-09  100.6851  98.901    105.2869  102.0494
2018-06-10  99.7135   99.9302   104.0121  101.0517
2018-06-11  99.1671   100.1283  104.0371  102.1618
2018-06-12  99.1959   101.4645  104.6458  104.0809
2018-06-13  101.9598  101.4914  105.0691  104.4907
⋮
2019-02-06  101.1773  98.5913   125.2685  110.717
2019-02-07  101.6806  99.2934   125.6279  110.0123
2019-02-08  101.2667  98.3068   124.1161  110.2624
2019-02-09  98.952    97.7876   124.1708  111.5769
2019-02-10  100.9657  96.0141   123.1344  110.9043
2019-02-11  100.2774  96.794    124.3477  110.8611
2019-02-12  100.4158  96.5768   124.2366  112.0445
2019-02-13  100.058   96.8445   122.652   111.9338

julia&gt; X[rand(Bool, size(X,1)), 1]
135x1 TS{Float64,Dates.Date}: 2018-06-10 to 2019-02-12

Index       A
2018-06-10  99.7135
2018-06-11  99.1671
2018-06-12  99.1959
2018-06-13  101.9598
2018-06-15  101.8601
2018-06-16  101.1949
2018-06-18  102.2545
⋮
2019-01-23  94.073
2019-01-28  97.1281
2019-01-30  96.5026
2019-02-03  100.9033
2019-02-06  101.1773
2019-02-08  101.2667
2019-02-10  100.9657
2019-02-12  100.4158

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
132x1 TS{Float64,Dates.Date}: 2018-06-08 to 2019-02-13

Index       A
2018-06-08  99.5848
2018-06-09  100.6851
2018-06-10  99.7135
2018-06-14  101.4486
2018-06-15  101.8601
2018-06-17  102.2634
2018-06-19  101.1144
⋮
2019-01-30  96.5026
2019-02-01  98.6251
2019-02-02  101.3996
2019-02-04  101.1328
2019-02-07  101.6806
2019-02-08  101.2667
2019-02-12  100.4158
2019-02-13  100.058</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A         B         C         D
2018-06-07  100.5525  99.7787   100.4666  100.6995
2018-06-08  101.3055  99.6331   100.6856  101.5897
2018-06-09  100.2772  98.7957   101.4043  104.2137
2018-06-10  99.4784   99.8789   99.7203   102.3042
2018-06-11  100.6629  100.7991  99.3827   102.2536
2018-06-12  101.052   100.843   98.3584   103.9128
2018-06-13  101.208   100.0969  98.4307   103.5869
⋮
2019-02-06  67.1813   90.4481   102.513   101.6536
2019-02-07  67.8267   89.1743   101.3748  102.2635
2019-02-08  69.9665   89.7206   100.6439  102.268
2019-02-09  71.0883   88.8762   101.5831  103.5954
2019-02-10  70.9819   89.871    102.1045  102.7423
2019-02-11  71.058    89.2835   101.1953  103.2652
2019-02-12  69.4056   89.7054   102.8785  103.2099
2019-02-13  69.3339   90.284    102.1784  104.0014

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-06-07 to 2018-06-16

Index       A         B         C         D
2018-06-07  100.5525  99.7787   100.4666  100.6995
2018-06-08  101.3055  99.6331   100.6856  101.5897
2018-06-09  100.2772  98.7957   101.4043  104.2137
2018-06-10  99.4784   99.8789   99.7203   102.3042
2018-06-11  100.6629  100.7991  99.3827   102.2536
2018-06-12  101.052   100.843   98.3584   103.9128
2018-06-13  101.208   100.0969  98.4307   103.5869
2018-06-14  101.4537  100.2549  98.0824   103.2156
2018-06-15  100.059   100.7365  99.5275   103.4994
2018-06-16  100.4551  101.04    99.9624   102.7208

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-11-05 to 2019-02-13

Index       B        C
2018-11-05  92.2315  112.3358
2018-11-06  92.8623  111.9405
2018-11-07  94.3875  112.9931
2018-11-08  94.0662  113.6807
2018-11-09  93.9735  114.4789
2018-11-10  93.0978  113.2208
2018-11-11  93.5155  114.7203
⋮
2019-02-06  90.4481  102.513
2019-02-07  89.1743  101.3748
2019-02-08  89.7206  100.6439
2019-02-09  88.8762  101.5831
2019-02-10  89.871   102.1045
2019-02-11  89.2835  101.1953
2019-02-12  89.7054  102.8785
2019-02-13  90.284   102.1784

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-02-13 to 2019-02-13

Index       B       C         D
2019-02-13  90.284  102.1784  104.0014</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A         B         C         D
2018-06-07  98.665    99.285    100.6853  99.5572
2018-06-08  99.2642   99.7616   101.9316  99.1266
2018-06-09  99.7609   100.8347  101.8956  99.359
2018-06-10  99.8593   98.9308   102.2666  98.3368
2018-06-11  101.5587  100.2275  101.8867  96.5848
2018-06-12  102.7603  100.3861  102.2773  95.0781
2018-06-13  103.2331  102.1232  101.5782  95.7937
⋮
2019-02-06  116.1414  77.4692   96.2912   101.6119
2019-02-07  115.2209  76.3904   97.1255   102.1441
2019-02-08  116.6139  76.8428   97.5263   101.5435
2019-02-09  115.6743  77.1601   97.4084   100.4515
2019-02-10  116.1921  76.6827   96.6974   99.1072
2019-02-11  115.3625  76.4172   96.4486   99.3364
2019-02-12  115.7486  76.5239   95.7319   98.0272
2019-02-13  114.4174  76.165    94.6994   99.3179

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       A
2018-06-07  98.665
2018-06-08  99.2642
2018-06-09  99.7609
2018-06-10  99.8593
2018-06-11  101.5587
2018-06-12  102.7603
2018-06-13  103.2331
⋮
2019-02-06  116.1414
2019-02-07  115.2209
2019-02-08  116.6139
2019-02-09  115.6743
2019-02-10  116.1921
2019-02-11  115.3625
2019-02-12  115.7486
2019-02-13  114.4174

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-13

Index       B         D
2018-06-07  99.285    99.5572
2018-06-08  99.7616   99.1266
2018-06-09  100.8347  99.359
2018-06-10  98.9308   98.3368
2018-06-11  100.2275  96.5848
2018-06-12  100.3861  95.0781
2018-06-13  102.1232  95.7937
⋮
2019-02-06  77.4692   101.6119
2019-02-07  76.3904   102.1441
2019-02-08  76.8428   101.5435
2019-02-09  77.1601   100.4515
2019-02-10  76.6827   99.1072
2019-02-11  76.4172   99.3364
2019-02-12  76.5239   98.0272
2019-02-13  76.165    99.3179</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  100.6281  99.808    100.4906  100.8153
2016-01-02  99.5308   98.4157   100.4908  99.0763
2016-01-03  101.0314  97.4244   99.5222   99.4853
2016-01-04  103.4477  97.3477   99.5198   98.8894
2016-01-05  102.6158  96.3938   99.7899   97.176
2016-01-06  102.8236  96.7328   99.6129   99.2389
2016-01-07  102.9976  95.5165   99.0286   98.7258
⋮
2017-12-24  73.4473   128.2511  104.0221  109.4696
2017-12-25  73.2623   126.7282  105.2563  108.7353
2017-12-26  73.9758   125.522   106.5709  108.9563
2017-12-27  72.5647   124.1598  106.5728  109.5255
2017-12-28  72.6427   124.6126  106.8666  108.0499
2017-12-29  71.999    123.9744  107.7279  107.7903
2017-12-30  73.6628   125.3139  109.2302  106.7454
2017-12-31  72.7873   125.2183  107.4929  106.1555

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A        B         C         D
2017-07-01  78.3953  107.8473  123.0775  115.1331

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  100.6281  99.808    100.4906  100.8153
2016-01-02  99.5308   98.4157   100.4908  99.0763
2016-01-03  101.0314  97.4244   99.5222   99.4853
2016-01-04  103.4477  97.3477   99.5198   98.8894
2016-01-05  102.6158  96.3938   99.7899   97.176
2016-01-06  102.8236  96.7328   99.6129   99.2389
2016-01-07  102.9976  95.5165   99.0286   98.7258
⋮
2016-12-24  89.4771   89.7702   96.1724   117.971
2016-12-25  87.8715   89.3063   96.3905   117.4317
2016-12-26  89.23     90.7602   98.2712   118.5269
2016-12-27  88.4356   90.6398   97.629    119.2708
2016-12-28  87.9793   90.5649   97.0422   119.1958
2016-12-29  88.2364   90.6732   97.968    118.6007
2016-12-30  88.333    92.3984   97.958    118.3861
2016-12-31  90.6013   92.7936   97.1075   119.6144

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
