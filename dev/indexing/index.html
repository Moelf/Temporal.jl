<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  98.7838   100.7856  100.6809  99.8409
2018-06-29  97.9662   101.2103  100.5546  99.1008
2018-06-30  97.3059   100.5084  99.9157   100.0533
2018-07-01  99.4571   99.9379   99.4677   101.0791
2018-07-02  101.4508  99.6489   100.5811  101.8226
2018-07-03  101.8075  98.5783   98.9382   102.4343
2018-07-04  103.3956  98.4144   99.1203   103.2327
⋮
2019-02-27  89.4665   119.6648  106.509   100.5792
2019-02-28  88.4085   120.3907  104.5234  99.7694
2019-03-01  87.9437   122.5372  104.5741  99.8227
2019-03-02  88.8904   122.6762  103.9247  99.7257
2019-03-03  90.8704   121.5994  103.0134  102.9201
2019-03-04  90.0458   121.1116  104.5116  102.9027
2019-03-05  90.9613   121.5556  104.5171  102.9458
2019-03-06  89.0842   122.1337  103.5655  103.0787

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A        B         C         D
2018-06-28  98.7838  100.7856  100.6809  99.8409

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A        B         C         D
2018-06-28  98.7838  100.7856  100.6809  99.8409

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  98.7838
2018-06-29  97.9662
2018-06-30  97.3059
2018-07-01  99.4571
2018-07-02  101.4508
2018-07-03  101.8075
2018-07-04  103.3956
⋮
2019-02-27  89.4665
2019-02-28  88.4085
2019-03-01  87.9437
2019-03-02  88.8904
2019-03-03  90.8704
2019-03-04  90.0458
2019-03-05  90.9613
2019-03-06  89.0842

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A
2018-06-28  98.7838</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  98.9744   99.0473   99.4594   101.2053
2018-06-29  97.9397   100.0694  100.9941  101.177
2018-06-30  98.0672   99.4432   102.4535  100.3203
2018-07-01  98.8163   98.9405   102.116   99.9239
2018-07-02  98.453    98.5248   102.3363  99.2063
2018-07-03  98.2049   97.0525   103.5021  97.7325
2018-07-04  97.2755   97.257    103.243   96.6109
⋮
2019-02-27  91.4425   120.6978  94.3277   93.8401
2019-02-28  91.7293   122.8078  93.8348   94.6319
2019-03-01  91.7675   123.9574  93.8829   94.8678
2019-03-02  89.3803   124.1693  93.96     94.806
2019-03-03  89.1913   123.0814  94.2524   97.2979
2019-03-04  89.1205   123.0238  93.315    95.3341
2019-03-05  90.0071   122.9877  93.7067   96.2921
2019-03-06  90.1457   122.2235  95.1497   95.6982

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  98.9744   99.0473   99.4594   101.2053
2018-06-29  97.9397   100.0694  100.9941  101.177
2018-06-30  98.0672   99.4432   102.4535  100.3203
2018-07-01  98.8163   98.9405   102.116   99.9239
2018-07-02  98.453    98.5248   102.3363  99.2063
2018-07-03  98.2049   97.0525   103.5021  97.7325
2018-07-04  97.2755   97.257    103.243   96.6109
⋮
2019-02-27  91.4425   120.6978  94.3277   93.8401
2019-02-28  91.7293   122.8078  93.8348   94.6319
2019-03-01  91.7675   123.9574  93.8829   94.8678
2019-03-02  89.3803   124.1693  93.96     94.806
2019-03-03  89.1913   123.0814  94.2524   97.2979
2019-03-04  89.1205   123.0238  93.315    95.3341
2019-03-05  90.0071   122.9877  93.7067   96.2921
2019-03-06  90.1457   122.2235  95.1497   95.6982

julia&gt; X[rand(Bool, size(X,1)), 1]
128x1 TS{Float64,Dates.Date}: 2018-06-29 to 2019-03-06

Index       A
2018-06-29  97.9397
2018-07-01  98.8163
2018-07-02  98.453
2018-07-05  97.0424
2018-07-06  97.1378
2018-07-09  96.4346
2018-07-11  94.7683
⋮
2019-02-21  93.2817
2019-02-27  91.4425
2019-02-28  91.7293
2019-03-01  91.7675
2019-03-02  89.3803
2019-03-03  89.1913
2019-03-04  89.1205
2019-03-06  90.1457

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
131x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  98.9744
2018-06-30  98.0672
2018-07-01  98.8163
2018-07-05  97.0424
2018-07-10  96.8797
2018-07-13  93.5501
2018-07-15  94.335
⋮
2019-02-19  94.1262
2019-02-21  93.2817
2019-02-24  92.9427
2019-02-25  93.5417
2019-02-26  93.6361
2019-03-01  91.7675
2019-03-02  89.3803
2019-03-06  90.1457</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  99.6946   98.7603   99.8266   98.9787
2018-06-29  100.0845  97.5519   99.7275   100.5911
2018-06-30  98.4145   98.4797   100.7033  99.7824
2018-07-01  98.7868   98.6016   100.975   100.3409
2018-07-02  100.0764  98.4801   100.0875  99.3719
2018-07-03  99.7289   97.8608   101.5957  100.3325
2018-07-04  98.3243   99.0144   100.9812  100.3195
⋮
2019-02-27  103.4628  108.4506  116.4189  136.9663
2019-02-28  103.4752  107.5895  114.2802  139.1418
2019-03-01  103.3732  108.9216  116.7044  139.6705
2019-03-02  101.2188  108.8127  116.4218  138.8909
2019-03-03  100.6191  108.3868  116.3669  138.8961
2019-03-04  99.116    108.7503  115.4208  137.944
2019-03-05  100.0629  108.2644  115.8842  137.749
2019-03-06  99.8409   107.7323  115.2801  137.2308

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-07-07

Index       A         B        C         D
2018-06-28  99.6946   98.7603  99.8266   98.9787
2018-06-29  100.0845  97.5519  99.7275   100.5911
2018-06-30  98.4145   98.4797  100.7033  99.7824
2018-07-01  98.7868   98.6016  100.975   100.3409
2018-07-02  100.0764  98.4801  100.0875  99.3719
2018-07-03  99.7289   97.8608  101.5957  100.3325
2018-07-04  98.3243   99.0144  100.9812  100.3195
2018-07-05  98.0853   98.9794  102.5915  100.5399
2018-07-06  96.2626   99.3927  103.2457  101.7363
2018-07-07  95.7072   99.3511  102.4355  101.9869

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-11-26 to 2019-03-06

Index       B         C
2018-11-26  107.3436  118.1224
2018-11-27  108.3579  117.7368
2018-11-28  108.4813  117.7652
2018-11-29  107.4647  116.2601
2018-11-30  107.3524  116.5637
2018-12-01  104.1792  117.3473
2018-12-02  103.9194  116.7823
⋮
2019-02-27  108.4506  116.4189
2019-02-28  107.5895  114.2802
2019-03-01  108.9216  116.7044
2019-03-02  108.8127  116.4218
2019-03-03  108.3868  116.3669
2019-03-04  108.7503  115.4208
2019-03-05  108.2644  115.8842
2019-03-06  107.7323  115.2801

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-03-06 to 2019-03-06

Index       B         C         D
2019-03-06  107.7323  115.2801  137.2308</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  97.4993   102.0886  98.4657   99.5717
2018-06-29  97.861    102.8547  97.6298   97.9056
2018-06-30  98.5021   104.3771  98.0379   98.3102
2018-07-01  98.3211   105.2688  99.1805   99.5427
2018-07-02  97.68     105.4362  99.3425   101.6181
2018-07-03  97.4414   104.0006  96.911    101.0975
2018-07-04  96.4602   104.8761  98.4641   100.9947
⋮
2019-02-27  103.2347  70.853    116.9756  102.4344
2019-02-28  100.798   70.6022   117.6183  102.6994
2019-03-01  103.716   70.8648   117.1254  102.3552
2019-03-02  103.9388  71.291    117.5619  102.9757
2019-03-03  103.8684  69.188    117.5571  102.0672
2019-03-04  103.4967  70.1701   116.9467  102.6844
2019-03-05  106.4001  69.0813   117.1895  102.9948
2019-03-06  107.1589  67.7535   115.898   100.6774

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  97.4993
2018-06-29  97.861
2018-06-30  98.5021
2018-07-01  98.3211
2018-07-02  97.68
2018-07-03  97.4414
2018-07-04  96.4602
⋮
2019-02-27  103.2347
2019-02-28  100.798
2019-03-01  103.716
2019-03-02  103.9388
2019-03-03  103.8684
2019-03-04  103.4967
2019-03-05  106.4001
2019-03-06  107.1589

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       B         D
2018-06-28  102.0886  99.5717
2018-06-29  102.8547  97.9056
2018-06-30  104.3771  98.3102
2018-07-01  105.2688  99.5427
2018-07-02  105.4362  101.6181
2018-07-03  104.0006  101.0975
2018-07-04  104.8761  100.9947
⋮
2019-02-27  70.853    102.4344
2019-02-28  70.6022   102.6994
2019-03-01  70.8648   102.3552
2019-03-02  71.291    102.9757
2019-03-03  69.188    102.0672
2019-03-04  70.1701   102.6844
2019-03-05  69.0813   102.9948
2019-03-06  67.7535   100.6774</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  100.9832  99.9366   99.8437   98.8177
2016-01-02  102.1548  99.4613   100.0459  100.63
2016-01-03  101.101   101.3504  99.2873   99.8621
2016-01-04  99.7079   99.7818   99.2717   98.7553
2016-01-05  98.8526   100.1423  98.6502   98.013
2016-01-06  98.1129   100.1584  97.9705   98.4728
2016-01-07  97.0155   99.5253   97.7368   98.4019
⋮
2017-12-24  140.8679  81.1667   140.8882  112.3193
2017-12-25  141.047   81.5613   140.5408  112.5952
2017-12-26  140.6683  82.6975   143.3956  113.4718
2017-12-27  138.9065  82.0827   142.2868  113.0768
2017-12-28  138.6624  82.6433   142.7396  113.7614
2017-12-29  138.1067  82.9609   143.5396  113.7727
2017-12-30  137.9544  82.8507   142.6878  112.0053
2017-12-31  139.5438  83.9361   144.4557  112.3473

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B        C        D
2017-07-01  142.1253  83.8475  143.356  120.5276

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  100.9832  99.9366   99.8437   98.8177
2016-01-02  102.1548  99.4613   100.0459  100.63
2016-01-03  101.101   101.3504  99.2873   99.8621
2016-01-04  99.7079   99.7818   99.2717   98.7553
2016-01-05  98.8526   100.1423  98.6502   98.013
2016-01-06  98.1129   100.1584  97.9705   98.4728
2016-01-07  97.0155   99.5253   97.7368   98.4019
⋮
2016-12-24  121.1378  99.8782   125.2197  103.8892
2016-12-25  122.4126  100.6497  126.6745  103.4823
2016-12-26  123.7789  99.316    125.6598  102.2051
2016-12-27  121.6317  97.5735   127.3226  102.2765
2016-12-28  121.0973  97.7125   127.8298  103.528
2016-12-29  119.3644  97.1027   126.8514  103.1654
2016-12-30  119.5414  97.294    127.8442  103.6289
2016-12-31  119.0304  97.6478   127.7776  105.3421

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
