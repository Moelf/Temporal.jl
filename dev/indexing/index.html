<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A         B         C         D
2018-06-13  98.8672   101.1982  99.9706   99.3417
2018-06-14  99.6212   101.0775  100.817   98.2346
2018-06-15  100.2703  101.6819  99.2396   97.2651
2018-06-16  100.4232  103.0115  97.4988   96.3558
2018-06-17  101.6793  103.1702  99.6699   97.4786
2018-06-18  100.1562  102.4633  100.9236  97.267
2018-06-19  98.391    102.452   101.3933  97.1001
⋮
2019-02-12  89.6521   77.3786   107.4267  75.2565
2019-02-13  90.6027   76.2733   107.7162  73.5797
2019-02-14  91.7179   76.0578   107.8573  75.1921
2019-02-15  91.897    77.4837   107.8579  75.6441
2019-02-16  91.9957   74.6597   106.6552  78.2748
2019-02-17  89.7716   74.9884   107.1884  78.0823
2019-02-18  90.8085   74.2839   107.1495  78.8981
2019-02-19  91.1442   73.8299   107.9698  76.8514

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-06-13 to 2018-06-13

Index       A        B         C        D
2018-06-13  98.8672  101.1982  99.9706  99.3417

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-06-13 to 2018-06-13

Index       A        B         C        D
2018-06-13  98.8672  101.1982  99.9706  99.3417

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A
2018-06-13  98.8672
2018-06-14  99.6212
2018-06-15  100.2703
2018-06-16  100.4232
2018-06-17  101.6793
2018-06-18  100.1562
2018-06-19  98.391
⋮
2019-02-12  89.6521
2019-02-13  90.6027
2019-02-14  91.7179
2019-02-15  91.897
2019-02-16  91.9957
2019-02-17  89.7716
2019-02-18  90.8085
2019-02-19  91.1442

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-06-13 to 2018-06-13

Index       A
2018-06-13  98.8672</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A        B         C         D
2018-06-13  99.8221  99.365    99.6088   99.5122
2018-06-14  99.2112  99.4806   98.4802   98.1672
2018-06-15  99.8219  99.9714   99.3437   98.0686
2018-06-16  99.0988  98.2263   99.6562   98.0777
2018-06-17  99.8564  99.7339   97.5783   98.3626
2018-06-18  98.4396  99.5166   96.5375   97.1066
2018-06-19  97.3332  100.9466  96.4624   95.8106
⋮
2019-02-12  90.6189  150.2038  94.2402   102.9726
2019-02-13  91.4284  150.0665  93.8567   104.065
2019-02-14  92.8053  147.9549  93.0189   104.6629
2019-02-15  93.9258  146.3253  93.9572   103.3187
2019-02-16  94.0147  146.8079  94.9314   102.687
2019-02-17  93.2399  148.4493  94.3744   101.6949
2019-02-18  94.9228  148.417   96.6491   102.2074
2019-02-19  94.5627  149.3348  97.9454   102.7359

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A        B         C         D
2018-06-13  99.8221  99.365    99.6088   99.5122
2018-06-14  99.2112  99.4806   98.4802   98.1672
2018-06-15  99.8219  99.9714   99.3437   98.0686
2018-06-16  99.0988  98.2263   99.6562   98.0777
2018-06-17  99.8564  99.7339   97.5783   98.3626
2018-06-18  98.4396  99.5166   96.5375   97.1066
2018-06-19  97.3332  100.9466  96.4624   95.8106
⋮
2019-02-12  90.6189  150.2038  94.2402   102.9726
2019-02-13  91.4284  150.0665  93.8567   104.065
2019-02-14  92.8053  147.9549  93.0189   104.6629
2019-02-15  93.9258  146.3253  93.9572   103.3187
2019-02-16  94.0147  146.8079  94.9314   102.687
2019-02-17  93.2399  148.4493  94.3744   101.6949
2019-02-18  94.9228  148.417   96.6491   102.2074
2019-02-19  94.5627  149.3348  97.9454   102.7359

julia&gt; X[rand(Bool, size(X,1)), 1]
123x1 TS{Float64,Dates.Date}: 2018-06-15 to 2019-02-19

Index       A
2018-06-15  99.8219
2018-06-16  99.0988
2018-06-18  98.4396
2018-06-22  94.068
2018-06-23  92.717
2018-06-24  93.1194
2018-06-25  91.4276
⋮
2019-01-31  91.0339
2019-02-01  89.2718
2019-02-08  88.535
2019-02-11  90.0806
2019-02-12  90.6189
2019-02-15  93.9258
2019-02-17  93.2399
2019-02-19  94.5627

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
130x1 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A
2018-06-13  99.8221
2018-06-14  99.2112
2018-06-15  99.8219
2018-06-16  99.0988
2018-06-18  98.4396
2018-06-21  94.7658
2018-06-23  92.717
⋮
2019-02-09  88.0493
2019-02-11  90.0806
2019-02-12  90.6189
2019-02-13  91.4284
2019-02-14  92.8053
2019-02-16  94.0147
2019-02-18  94.9228
2019-02-19  94.5627</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A         B         C         D
2018-06-13  99.2549   99.6536   98.6522   99.3019
2018-06-14  99.8931   99.5416   99.5735   99.6999
2018-06-15  99.0253   102.0871  99.6291   100.0523
2018-06-16  98.4954   102.5683  98.1008   98.2876
2018-06-17  98.0173   102.5087  97.0872   97.6451
2018-06-18  100.2135  104.2664  97.6825   97.1552
2018-06-19  100.8606  105.1446  97.2163   96.8055
⋮
2019-02-12  81.9148   89.5488   105.6803  87.6789
2019-02-13  83.0092   87.9734   105.5781  84.1971
2019-02-14  84.1756   90.2121   106.2516  85.9656
2019-02-15  84.816    90.1146   107.544   85.805
2019-02-16  85.5414   90.2128   108.5719  85.2426
2019-02-17  86.332    91.0502   108.3956  86.1561
2019-02-18  85.2881   90.5851   109.5963  85.4021
2019-02-19  85.1561   92.3354   108.4379  86.9241

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-06-13 to 2018-06-22

Index       A         B         C        D
2018-06-13  99.2549   99.6536   98.6522  99.3019
2018-06-14  99.8931   99.5416   99.5735  99.6999
2018-06-15  99.0253   102.0871  99.6291  100.0523
2018-06-16  98.4954   102.5683  98.1008  98.2876
2018-06-17  98.0173   102.5087  97.0872  97.6451
2018-06-18  100.2135  104.2664  97.6825  97.1552
2018-06-19  100.8606  105.1446  97.2163  96.8055
2018-06-20  101.2169  105.8583  94.968   97.495
2018-06-21  100.6639  106.1443  96.0708  98.199
2018-06-22  99.5696   106.4328  96.0429  99.222

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-11-11 to 2019-02-19

Index       B         C
2018-11-11  89.0852   98.3336
2018-11-12  89.2836   99.0187
2018-11-13  88.6749   98.7369
2018-11-14  89.7942   100.2515
2018-11-15  90.8575   99.0332
2018-11-16  91.9891   99.9063
2018-11-17  91.9593   101.0832
⋮
2019-02-12  89.5488   105.6803
2019-02-13  87.9734   105.5781
2019-02-14  90.2121   106.2516
2019-02-15  90.1146   107.544
2019-02-16  90.2128   108.5719
2019-02-17  91.0502   108.3956
2019-02-18  90.5851   109.5963
2019-02-19  92.3354   108.4379

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-02-19 to 2019-02-19

Index       B        C         D
2019-02-19  92.3354  108.4379  86.9241</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A         B         C         D
2018-06-13  100.1623  97.9576   101.7229  98.6422
2018-06-14  97.6908   98.3478   101.7449  97.443
2018-06-15  98.2154   99.0093   100.5475  97.3595
2018-06-16  98.8615   99.3077   100.8056  98.0863
2018-06-17  99.0625   99.6026   100.0779  98.6721
2018-06-18  98.3964   99.0253   99.5592   97.9657
2018-06-19  98.8408   101.1323  100.5908  97.4136
⋮
2019-02-12  99.6146   115.934   104.7115  109.8698
2019-02-13  99.2405   116.6002  103.2609  108.623
2019-02-14  100.6533  117.3619  101.5531  108.7048
2019-02-15  98.2977   118.6991  100.5548  108.9742
2019-02-16  98.9196   118.0769  99.121    109.0289
2019-02-17  99.4486   117.2011  97.6471   110.0259
2019-02-18  101.3942  116.3318  96.3783   110.7066
2019-02-19  99.9291   117.3282  96.1031   110.6713

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       A
2018-06-13  100.1623
2018-06-14  97.6908
2018-06-15  98.2154
2018-06-16  98.8615
2018-06-17  99.0625
2018-06-18  98.3964
2018-06-19  98.8408
⋮
2019-02-12  99.6146
2019-02-13  99.2405
2019-02-14  100.6533
2019-02-15  98.2977
2019-02-16  98.9196
2019-02-17  99.4486
2019-02-18  101.3942
2019-02-19  99.9291

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-06-13 to 2019-02-19

Index       B         D
2018-06-13  97.9576   98.6422
2018-06-14  98.3478   97.443
2018-06-15  99.0093   97.3595
2018-06-16  99.3077   98.0863
2018-06-17  99.6026   98.6721
2018-06-18  99.0253   97.9657
2018-06-19  101.1323  97.4136
⋮
2019-02-12  115.934   109.8698
2019-02-13  116.6002  108.623
2019-02-14  117.3619  108.7048
2019-02-15  118.6991  108.9742
2019-02-16  118.0769  109.0289
2019-02-17  117.2011  110.0259
2019-02-18  116.3318  110.7066
2019-02-19  117.3282  110.6713</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  101.1617  99.968    100.1271  99.579
2016-01-02  100.9134  99.8128   101.0426  99.5983
2016-01-03  99.8867   99.3567   100.5902  98.9688
2016-01-04  99.4429   99.1203   100.637   100.9377
2016-01-05  98.8408   99.6644   99.9033   99.5626
2016-01-06  97.5124   99.1717   100.2689  99.4745
2016-01-07  97.5414   99.9037   100.9015  99.3581
⋮
2017-12-24  109.9197  125.2358  104.3635  91.9465
2017-12-25  110.2756  124.1633  105.4446  92.2596
2017-12-26  110.3108  123.9238  104.7092  90.4061
2017-12-27  112.7631  124.273   104.9359  90.3855
2017-12-28  112.651   123.5242  104.6525  90.7837
2017-12-29  112.2479  124.1446  105.0739  91.7779
2017-12-30  112.703   124.9767  105.8372  90.7467
2017-12-31  113.2949  125.0272  107.3172  91.3165

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A        B         C         D
2017-07-01  95.1198  119.8432  129.5508  72.1787

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  101.1617  99.968    100.1271  99.579
2016-01-02  100.9134  99.8128   101.0426  99.5983
2016-01-03  99.8867   99.3567   100.5902  98.9688
2016-01-04  99.4429   99.1203   100.637   100.9377
2016-01-05  98.8408   99.6644   99.9033   99.5626
2016-01-06  97.5124   99.1717   100.2689  99.4745
2016-01-07  97.5414   99.9037   100.9015  99.3581
⋮
2016-12-24  98.1477   124.7067  139.9608  76.8849
2016-12-25  97.2862   124.2384  138.6794  74.7426
2016-12-26  96.453    125.0874  136.8245  74.6343
2016-12-27  96.4118   126.3417  135.6962  74.9031
2016-12-28  96.2232   126.7321  136.0448  74.2898
2016-12-29  95.7357   126.1504  135.3799  73.7225
2016-12-30  95.2617   126.494   134.2665  73.1621
2016-12-31  95.0735   126.0403  133.9119  74.2608

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
