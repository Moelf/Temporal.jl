<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  99.5769   100.3368  100.0549  98.6305
2019-02-23  98.7175   101.0243  97.9891   99.8823
2019-02-24  98.3002   102.0915  98.1256   101.0614
2019-02-25  98.1405   103.0347  96.9119   100.4405
2019-02-26  98.7644   102.5179  96.5094   100.2242
2019-02-27  98.4557   104.1337  93.2913   101.6481
2019-02-28  97.8021   104.9558  94.5226   99.7762
⋮
2019-10-24  80.7717   102.1795  85.565    117.31
2019-10-25  79.7683   102.185   84.8181   117.2612
2019-10-26  79.1648   102.5032  83.9538   117.6344
2019-10-27  79.9558   103.2643  83.1531   116.5344
2019-10-28  80.4      103.6056  81.8799   115.6431
2019-10-29  80.9057   103.3323  81.8063   116.2281
2019-10-30  80.475    103.7535  81.3039   115.3408
2019-10-31  79.9451   103.4046  80.1232   115.3544

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A        B         C         D
2019-02-22  99.5769  100.3368  100.0549  98.6305

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A        B         C         D
2019-02-22  99.5769  100.3368  100.0549  98.6305

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  99.5769
2019-02-23  98.7175
2019-02-24  98.3002
2019-02-25  98.1405
2019-02-26  98.7644
2019-02-27  98.4557
2019-02-28  97.8021
⋮
2019-10-24  80.7717
2019-10-25  79.7683
2019-10-26  79.1648
2019-10-27  79.9558
2019-10-28  80.4
2019-10-29  80.9057
2019-10-30  80.475
2019-10-31  79.9451

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A
2019-02-22  99.5769</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  100.8778  99.7238   102.9912  99.9077
2019-02-23  101.1778  100.8355  101.8752  98.8542
2019-02-24  99.6941   100.3798  102.4414  96.4736
2019-02-25  99.3756   101.578   101.2573  97.3263
2019-02-26  98.7262   101.3383  103.0526  97.0579
2019-02-27  100.4418  102.0632  104.2596  98.0471
2019-02-28  100.2192  101.4945  103.5255  98.4276
⋮
2019-10-24  89.2339   86.2263   120.6901  102.3722
2019-10-25  89.6493   85.715    121.6314  103.0724
2019-10-26  88.3508   86.1562   122.1227  101.3793
2019-10-27  88.5479   86.7309   120.6955  101.1357
2019-10-28  87.9447   87.6284   120.7131  100.5912
2019-10-29  88.3006   87.0408   121.425   99.8386
2019-10-30  87.4548   87.1675   121.3698  99.7427
2019-10-31  88.0938   87.0658   122.0897  100.4474

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  100.8778  99.7238   102.9912  99.9077
2019-02-23  101.1778  100.8355  101.8752  98.8542
2019-02-24  99.6941   100.3798  102.4414  96.4736
2019-02-25  99.3756   101.578   101.2573  97.3263
2019-02-26  98.7262   101.3383  103.0526  97.0579
2019-02-27  100.4418  102.0632  104.2596  98.0471
2019-02-28  100.2192  101.4945  103.5255  98.4276
⋮
2019-10-24  89.2339   86.2263   120.6901  102.3722
2019-10-25  89.6493   85.715    121.6314  103.0724
2019-10-26  88.3508   86.1562   122.1227  101.3793
2019-10-27  88.5479   86.7309   120.6955  101.1357
2019-10-28  87.9447   87.6284   120.7131  100.5912
2019-10-29  88.3006   87.0408   121.425   99.8386
2019-10-30  87.4548   87.1675   121.3698  99.7427
2019-10-31  88.0938   87.0658   122.0897  100.4474

julia&gt; X[rand(Bool, size(X,1)), 1]
135x1 TS{Float64,Dates.Date}: 2019-02-23 to 2019-10-31

Index       A
2019-02-23  101.1778
2019-02-24  99.6941
2019-02-27  100.4418
2019-02-28  100.2192
2019-03-02  99.6081
2019-03-04  99.9926
2019-03-05  101.4668
⋮
2019-10-17  89.9755
2019-10-19  87.2781
2019-10-23  89.2679
2019-10-24  89.2339
2019-10-25  89.6493
2019-10-26  88.3508
2019-10-29  88.3006
2019-10-31  88.0938

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
132x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  100.8778
2019-02-24  99.6941
2019-02-25  99.3756
2019-02-26  98.7262
2019-03-03  98.1977
2019-03-08  99.6922
2019-03-10  100.3498
⋮
2019-10-22  89.0615
2019-10-23  89.2679
2019-10-24  89.2339
2019-10-25  89.6493
2019-10-27  88.5479
2019-10-28  87.9447
2019-10-29  88.3006
2019-10-31  88.0938</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  99.4742   98.1433   99.2274   100.513
2019-02-23  98.6212   98.1294   100.838   99.5887
2019-02-24  99.7474   97.5251   100.5513  100.5813
2019-02-25  99.9591   97.1373   101.4808  99.3512
2019-02-26  99.1573   97.0549   101.8789  99.3183
2019-02-27  99.386    96.4549   101.8281  99.8583
2019-02-28  100.2047  95.0077   101.1354  99.6702
⋮
2019-10-24  96.475    97.9131   105.0179  92.5847
2019-10-25  96.8654   98.2832   105.0758  91.7445
2019-10-26  94.3325   98.6401   105.4561  93.5307
2019-10-27  93.3789   99.4414   105.3985  91.7251
2019-10-28  94.021    99.8481   105.462   91.2823
2019-10-29  93.2757   99.2066   106.895   90.0608
2019-10-30  93.5545   98.9002   106.1587  89.8205
2019-10-31  92.5313   97.5564   106.2178  88.6866

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-03-03

Index       A         B        C         D
2019-02-22  99.4742   98.1433  99.2274   100.513
2019-02-23  98.6212   98.1294  100.838   99.5887
2019-02-24  99.7474   97.5251  100.5513  100.5813
2019-02-25  99.9591   97.1373  101.4808  99.3512
2019-02-26  99.1573   97.0549  101.8789  99.3183
2019-02-27  99.386    96.4549  101.8281  99.8583
2019-02-28  100.2047  95.0077  101.1354  99.6702
2019-03-01  100.6294  96.5083  101.5412  98.0614
2019-03-02  100.5981  96.9591  101.1808  99.6189
2019-03-03  102.4434  97.8647  99.1096   100.9399

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2019-07-23 to 2019-10-31

Index       B         C
2019-07-23  118.0636  104.8506
2019-07-24  119.0109  105.4091
2019-07-25  117.386   104.9154
2019-07-26  117.9922  104.2885
2019-07-27  118.7914  105.0568
2019-07-28  117.381   105.5903
2019-07-29  117.2347  106.2915
⋮
2019-10-24  97.9131   105.0179
2019-10-25  98.2832   105.0758
2019-10-26  98.6401   105.4561
2019-10-27  99.4414   105.3985
2019-10-28  99.8481   105.462
2019-10-29  99.2066   106.895
2019-10-30  98.9002   106.1587
2019-10-31  97.5564   106.2178

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-10-31 to 2019-10-31

Index       B        C         D
2019-10-31  97.5564  106.2178  88.6866</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  100.3898  101.0286  98.0918   99.5434
2019-02-23  100.8169  100.8598  98.522    98.8161
2019-02-24  99.9762   100.8119  99.0369   98.3588
2019-02-25  99.0113   100.6571  99.3724   98.4547
2019-02-26  99.4208   99.5872   98.5968   99.7235
2019-02-27  101.0589  99.4018   99.4207   98.5856
2019-02-28  102.3449  98.816    99.7589   96.186
⋮
2019-10-24  78.9208   61.3282   119.1571  63.2141
2019-10-25  77.8886   61.2821   121.4723  63.965
2019-10-26  78.7038   60.5141   122.634   65.2181
2019-10-27  78.1481   60.5809   122.1744  65.5154
2019-10-28  78.6155   62.0186   122.4614  65.7723
2019-10-29  79.6602   60.7648   123.3377  66.3919
2019-10-30  79.7895   61.512    123.8067  67.5225
2019-10-31  81.2447   61.8009   123.3078  67.1062

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  100.3898
2019-02-23  100.8169
2019-02-24  99.9762
2019-02-25  99.0113
2019-02-26  99.4208
2019-02-27  101.0589
2019-02-28  102.3449
⋮
2019-10-24  78.9208
2019-10-25  77.8886
2019-10-26  78.7038
2019-10-27  78.1481
2019-10-28  78.6155
2019-10-29  79.6602
2019-10-30  79.7895
2019-10-31  81.2447

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       B         D
2019-02-22  101.0286  99.5434
2019-02-23  100.8598  98.8161
2019-02-24  100.8119  98.3588
2019-02-25  100.6571  98.4547
2019-02-26  99.5872   99.7235
2019-02-27  99.4018   98.5856
2019-02-28  98.816    96.186
⋮
2019-10-24  61.3282   63.2141
2019-10-25  61.2821   63.965
2019-10-26  60.5141   65.2181
2019-10-27  60.5809   65.5154
2019-10-28  62.0186   65.7723
2019-10-29  60.7648   66.3919
2019-10-30  61.512    67.5225
2019-10-31  61.8009   67.1062</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  99.3922   98.8158   100.7433  100.926
2016-01-02  100.5872  97.756    100.1304  100.7001
2016-01-03  101.4871  97.8435   100.1593  99.1013
2016-01-04  103.0033  96.1448   100.557   97.3655
2016-01-05  104.4108  96.0031   99.207    97.247
2016-01-06  104.533   94.111    98.6312   96.0723
2016-01-07  103.867   93.7489   98.8924   96.1464
⋮
2017-12-24  63.9235   116.8343  85.0536   99.2461
2017-12-25  64.3898   117.3536  84.6156   99.8434
2017-12-26  64.582    118.9115  84.3832   99.7829
2017-12-27  64.8331   116.2987  84.9758   100.9792
2017-12-28  65.0584   117.2553  85.4476   100.5161
2017-12-29  65.7657   117.5311  86.11     99.9186
2017-12-30  67.371    118.399   85.7525   100.8039
2017-12-31  66.9349   116.7986  86.5279   102.2621

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A        B         C       D
2017-07-01  91.5364  108.5484  91.979  83.4295

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B        C         D
2016-01-01  99.3922   98.8158  100.7433  100.926
2016-01-02  100.5872  97.756   100.1304  100.7001
2016-01-03  101.4871  97.8435  100.1593  99.1013
2016-01-04  103.0033  96.1448  100.557   97.3655
2016-01-05  104.4108  96.0031  99.207    97.247
2016-01-06  104.533   94.111   98.6312   96.0723
2016-01-07  103.867   93.7489  98.8924   96.1464
⋮
2016-12-24  78.6325   89.0463  82.6458   85.6233
2016-12-25  78.8793   90.5839  83.5523   87.2186
2016-12-26  79.1914   89.6563  82.6722   87.7078
2016-12-27  78.4625   89.3574  83.0926   87.2177
2016-12-28  79.9792   90.1764  83.9206   87.9092
2016-12-29  79.9516   87.5135  83.9791   90.3201
2016-12-30  80.9537   86.6971  84.5548   89.3023
2016-12-31  81.0742   86.2526  83.5981   88.7749

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
473x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-12-31

Index       A         B         C         D
2016-09-15  87.2751   79.6059   92.8788   87.26
2016-09-16  86.818    78.1255   92.0931   85.1283
2016-09-17  85.0428   79.168    92.1354   84.4197
2016-09-18  85.9106   79.0713   92.2332   84.5949
2016-09-19  86.0007   78.0948   89.5879   83.9057
2016-09-20  86.3666   76.7319   88.6485   84.4177
2016-09-21  86.1595   75.55     89.2311   84.4522
⋮
2017-12-24  63.9235   116.8343  85.0536   99.2461
2017-12-25  64.3898   117.3536  84.6156   99.8434
2017-12-26  64.582    118.9115  84.3832   99.7829
2017-12-27  64.8331   116.2987  84.9758   100.9792
2017-12-28  65.0584   117.2553  85.4476   100.5161
2017-12-29  65.7657   117.5311  86.11     99.9186
2017-12-30  67.371    118.399   85.7525   100.8039
2017-12-31  66.9349   116.7986  86.5279   102.2621

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
548x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-07-01

Index       A         B         C         D
2016-01-01  99.3922   98.8158   100.7433  100.926
2016-01-02  100.5872  97.756    100.1304  100.7001
2016-01-03  101.4871  97.8435   100.1593  99.1013
2016-01-04  103.0033  96.1448   100.557   97.3655
2016-01-05  104.4108  96.0031   99.207    97.247
2016-01-06  104.533   94.111    98.6312   96.0723
2016-01-07  103.867   93.7489   98.8924   96.1464
⋮
2017-06-24  91.4542   104.6053  91.798    84.0732
2017-06-25  91.0794   105.3782  94.2216   84.111
2017-06-26  91.5289   106.5738  95.2091   83.8663
2017-06-27  91.5395   105.9305  95.9086   84.6929
2017-06-28  91.6622   107.4874  94.6567   84.3625
2017-06-29  91.1718   106.8453  93.4716   83.6157
2017-06-30  92.0577   108.314   93.1235   84.1452
2017-07-01  91.5364   108.5484  91.979    83.4295

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
290x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-07-01

Index       A         B         C        D
2016-09-15  87.2751   79.6059   92.8788  87.26
2016-09-16  86.818    78.1255   92.0931  85.1283
2016-09-17  85.0428   79.168    92.1354  84.4197
2016-09-18  85.9106   79.0713   92.2332  84.5949
2016-09-19  86.0007   78.0948   89.5879  83.9057
2016-09-20  86.3666   76.7319   88.6485  84.4177
2016-09-21  86.1595   75.55     89.2311  84.4522
⋮
2017-06-24  91.4542   104.6053  91.798   84.0732
2017-06-25  91.0794   105.3782  94.2216  84.111
2017-06-26  91.5289   106.5738  95.2091  83.8663
2017-06-27  91.5395   105.9305  95.9086  84.6929
2017-06-28  91.6622   107.4874  94.6567  84.3625
2017-06-29  91.1718   106.8453  93.4716  83.6157
2017-06-30  92.0577   108.314   93.1235  84.1452
2017-07-01  91.5364   108.5484  91.979   83.4295</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
