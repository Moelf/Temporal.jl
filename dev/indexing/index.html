<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Indexing · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../ts/">TS Object</a></li><li><a class="toctext" href="../calculation/">Calculation</a></li><li><a class="toctext" href="../io/">Data Access</a></li><li><span class="toctext">Data Manipulation</span><ul><li class="current"><a class="toctext" href>Indexing</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Joins</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data Manipulation</li><li><a href>Indexing</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Indexing</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A         B         C         D
2018-06-06  99.1469   100.1719  100.7193  97.9601
2018-06-07  97.6429   100.6946  102.3301  98.1477
2018-06-08  97.4738   100.3993  101.0028  98.8403
2018-06-09  97.1357   100.6288  101.9337  98.8627
2018-06-10  97.8155   102.0782  104.3588  101.4462
2018-06-11  98.7367   101.4619  103.4145  100.2365
2018-06-12  100.0305  103.3155  103.4525  98.9649
⋮
2019-02-05  86.0768   80.0191   92.5575   95.2795
2019-02-06  88.1399   79.4733   91.1141   95.9287
2019-02-07  87.4912   77.8782   90.197    95.2661
2019-02-08  88.1876   76.8043   90.5975   95.3769
2019-02-09  86.588    75.9476   89.6627   93.4764
2019-02-10  87.1058   75.6139   89.0907   93.1483
2019-02-11  85.6606   75.4471   89.6197   94.2117
2019-02-12  84.6345   75.1658   89.1908   95.4819

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-06-06 to 2018-06-06

Index       A        B         C         D
2018-06-06  99.1469  100.1719  100.7193  97.9601

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-06-06 to 2018-06-06

Index       A        B         C         D
2018-06-06  99.1469  100.1719  100.7193  97.9601

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A
2018-06-06  99.1469
2018-06-07  97.6429
2018-06-08  97.4738
2018-06-09  97.1357
2018-06-10  97.8155
2018-06-11  98.7367
2018-06-12  100.0305
⋮
2019-02-05  86.0768
2019-02-06  88.1399
2019-02-07  87.4912
2019-02-08  88.1876
2019-02-09  86.588
2019-02-10  87.1058
2019-02-11  85.6606
2019-02-12  84.6345

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-06-06 to 2018-06-06

Index       A
2018-06-06  99.1469</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A         B         C         D
2018-06-06  100.009   100.3211  98.0873   100.113
2018-06-07  100.8201  99.0582   99.4114   99.9894
2018-06-08  101.219   99.9438   100.2248  99.9077
2018-06-09  100.3421  98.3898   100.1767  101.3061
2018-06-10  99.5375   98.4948   98.9794   99.6233
2018-06-11  98.8189   97.3785   100.4867  100.9059
2018-06-12  99.3716   97.3407   101.857   101.0475
⋮
2019-02-05  101.6188  94.8537   79.9927   80.2433
2019-02-06  102.0026  95.1136   81.0762   81.2647
2019-02-07  101.1563  93.7495   80.5035   82.4089
2019-02-08  102.55    92.6424   80.665    82.3312
2019-02-09  103.3548  90.8101   81.711    82.6463
2019-02-10  102.5735  91.5433   80.4185   81.2994
2019-02-11  100.1726  89.7289   79.5389   81.7266
2019-02-12  101.313   89.7946   80.3546   82.4022

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A         B         C         D
2018-06-06  100.009   100.3211  98.0873   100.113
2018-06-07  100.8201  99.0582   99.4114   99.9894
2018-06-08  101.219   99.9438   100.2248  99.9077
2018-06-09  100.3421  98.3898   100.1767  101.3061
2018-06-10  99.5375   98.4948   98.9794   99.6233
2018-06-11  98.8189   97.3785   100.4867  100.9059
2018-06-12  99.3716   97.3407   101.857   101.0475
⋮
2019-02-05  101.6188  94.8537   79.9927   80.2433
2019-02-06  102.0026  95.1136   81.0762   81.2647
2019-02-07  101.1563  93.7495   80.5035   82.4089
2019-02-08  102.55    92.6424   80.665    82.3312
2019-02-09  103.3548  90.8101   81.711    82.6463
2019-02-10  102.5735  91.5433   80.4185   81.2994
2019-02-11  100.1726  89.7289   79.5389   81.7266
2019-02-12  101.313   89.7946   80.3546   82.4022

julia&gt; X[rand(Bool, size(X,1)), 1]
123x1 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-07

Index       A
2018-06-07  100.8201
2018-06-08  101.219
2018-06-11  98.8189
2018-06-12  99.3716
2018-06-16  99.0102
2018-06-17  101.0541
2018-06-18  101.4879
⋮
2019-01-28  101.4579
2019-01-29  100.6872
2019-01-30  100.938
2019-02-01  101.8315
2019-02-04  101.2765
2019-02-05  101.6188
2019-02-06  102.0026
2019-02-07  101.1563

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
120x1 TS{Float64,Dates.Date}: 2018-06-07 to 2019-02-12

Index       A
2018-06-07  100.8201
2018-06-08  101.219
2018-06-09  100.3421
2018-06-10  99.5375
2018-06-11  98.8189
2018-06-12  99.3716
2018-06-15  99.9107
⋮
2019-01-30  100.938
2019-01-31  100.6204
2019-02-02  101.0864
2019-02-04  101.2765
2019-02-06  102.0026
2019-02-10  102.5735
2019-02-11  100.1726
2019-02-12  101.313</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A         B         C         D
2018-06-06  100.3919  99.4076   99.78     99.7027
2018-06-07  98.851    98.1981   99.751    99.1782
2018-06-08  98.464    98.4788   99.8263   98.0229
2018-06-09  97.3686   100.299   99.8098   98.0743
2018-06-10  97.6995   99.8136   97.9879   96.9764
2018-06-11  97.6198   100.5243  97.9871   97.3363
2018-06-12  99.6698   99.8682   100.8947  95.9093
⋮
2019-02-05  101.546   119.5407  101.1573  94.2061
2019-02-06  102.5251  120.6838  100.3956  93.0882
2019-02-07  100.8897  122.2192  99.8177   91.0254
2019-02-08  99.3247   122.1158  99.0854   91.8994
2019-02-09  100.9958  123.2321  100.814   91.839
2019-02-10  98.7466   121.5173  101.4967  91.4632
2019-02-11  98.2307   120.8085  101.4598  91.4454
2019-02-12  99.0008   120.013   100.5261  92.1719

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-06-06 to 2018-06-15

Index       A         B         C         D
2018-06-06  100.3919  99.4076   99.78     99.7027
2018-06-07  98.851    98.1981   99.751    99.1782
2018-06-08  98.464    98.4788   99.8263   98.0229
2018-06-09  97.3686   100.299   99.8098   98.0743
2018-06-10  97.6995   99.8136   97.9879   96.9764
2018-06-11  97.6198   100.5243  97.9871   97.3363
2018-06-12  99.6698   99.8682   100.8947  95.9093
2018-06-13  99.9953   99.168    101.4103  96.6091
2018-06-14  98.6276   99.8649   103.0814  96.0541
2018-06-15  98.393    100.8434  102.3392  97.6141

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-11-04 to 2019-02-12

Index       B         C
2018-11-04  93.4088   101.0784
2018-11-05  93.8916   101.2042
2018-11-06  93.6618   100.7664
2018-11-07  95.3363   102.4953
2018-11-08  94.4295   104.3883
2018-11-09  94.2364   105.1493
2018-11-10  93.1989   105.4589
⋮
2019-02-05  119.5407  101.1573
2019-02-06  120.6838  100.3956
2019-02-07  122.2192  99.8177
2019-02-08  122.1158  99.0854
2019-02-09  123.2321  100.814
2019-02-10  121.5173  101.4967
2019-02-11  120.8085  101.4598
2019-02-12  120.013   100.5261

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-02-12 to 2019-02-12

Index       B        C         D
2019-02-12  120.013  100.5261  92.1719</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A         B         C         D
2018-06-06  99.5673   100.3755  99.0334   100.196
2018-06-07  99.6502   101.9073  99.6513   101.1735
2018-06-08  99.937    102.3527  98.0678   101.1857
2018-06-09  99.1174   102.9585  97.85     101.1723
2018-06-10  100.1019  102.559   97.2849   98.9659
2018-06-11  98.9763   102.8887  98.4252   98.421
2018-06-12  97.495    103.0865  98.9363   100.9579
⋮
2019-02-05  103.2195  98.6921   95.7947   116.7891
2019-02-06  106.0152  100.165   95.1069   116.6943
2019-02-07  106.4471  100.4895  94.7255   117.3585
2019-02-08  107.6225  98.1815   95.8598   118.8347
2019-02-09  108.4616  97.5495   95.9009   119.4124
2019-02-10  106.9623  98.6072   96.5276   118.1083
2019-02-11  105.9384  98.7154   96.8328   117.9255
2019-02-12  108.0446  98.0944   99.1013   118.4678

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       A
2018-06-06  99.5673
2018-06-07  99.6502
2018-06-08  99.937
2018-06-09  99.1174
2018-06-10  100.1019
2018-06-11  98.9763
2018-06-12  97.495
⋮
2019-02-05  103.2195
2019-02-06  106.0152
2019-02-07  106.4471
2019-02-08  107.6225
2019-02-09  108.4616
2019-02-10  106.9623
2019-02-11  105.9384
2019-02-12  108.0446

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-06-06 to 2019-02-12

Index       B         D
2018-06-06  100.3755  100.196
2018-06-07  101.9073  101.1735
2018-06-08  102.3527  101.1857
2018-06-09  102.9585  101.1723
2018-06-10  102.559   98.9659
2018-06-11  102.8887  98.421
2018-06-12  103.0865  100.9579
⋮
2019-02-05  98.6921   116.7891
2019-02-06  100.165   116.6943
2019-02-07  100.4895  117.3585
2019-02-08  98.1815   118.8347
2019-02-09  97.5495   119.4124
2019-02-10  98.6072   118.1083
2019-02-11  98.7154   117.9255
2019-02-12  98.0944   118.4678</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B        C         D
2016-01-01  98.8611   98.9588  99.583    101.1959
2016-01-02  96.5177   99.0117  99.6293   101.0382
2016-01-03  98.1107   98.8077  100.8632  101.5199
2016-01-04  97.458    97.37    98.6834   100.6618
2016-01-05  98.6644   97.5425  98.8251   100.7243
2016-01-06  99.9216   99.0722  98.3699   101.455
2016-01-07  99.5461   99.0206  96.9818   100.7586
⋮
2017-12-24  107.3513  58.6987  90.4324   98.5236
2017-12-25  106.8163  58.5967  90.05     95.6138
2017-12-26  107.3528  59.7001  90.9237   94.5671
2017-12-27  106.4105  60.2676  91.9248   94.1662
2017-12-28  105.4496  61.4225  92.3238   93.1965
2017-12-29  103.6006  61.421   91.0555   92.0231
2017-12-30  104.6261  61.1121  92.3124   90.6717
2017-12-31  104.2615  62.2624  93.5027   92.3699

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B        C        D
2017-07-01  101.5268  65.0608  99.9877  65.2737

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B        C         D
2016-01-01  98.8611   98.9588  99.583    101.1959
2016-01-02  96.5177   99.0117  99.6293   101.0382
2016-01-03  98.1107   98.8077  100.8632  101.5199
2016-01-04  97.458    97.37    98.6834   100.6618
2016-01-05  98.6644   97.5425  98.8251   100.7243
2016-01-06  99.9216   99.0722  98.3699   101.455
2016-01-07  99.5461   99.0206  96.9818   100.7586
⋮
2016-12-24  92.9149   80.1442  97.545    72.8392
2016-12-25  93.8761   80.3887  97.6929   74.2212
2016-12-26  95.4383   80.7263  97.3477   73.5667
2016-12-27  95.8014   80.5139  97.6406   76.2494
2016-12-28  96.6505   81.3384  98.1116   79.1282
2016-12-29  95.3843   81.2772  97.8161   78.4445
2016-12-30  95.4336   81.9337  96.8504   78.5964
2016-12-31  95.159    81.0824  97.9877   77.4671

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">Data Access</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Joins</span></a></footer></article></body></html>
