<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  100.0176  100.551   98.9326   99.7118
2018-06-29  101.313   100.0933  98.721    98.3131
2018-06-30  101.8708  99.186    97.2347   99.437
2018-07-01  102.854   99.2409   96.9401   98.8042
2018-07-02  103.1628  99.2023   97.1326   99.5003
2018-07-03  103.9191  99.3005   95.6838   99.2413
2018-07-04  103.7097  100.896   94.5337   100.18
⋮
2019-02-27  109.5239  81.3221   102.0398  93.9462
2019-02-28  107.4943  81.6281   102.8665  93.0051
2019-03-01  108.5184  81.9325   102.8325  91.8828
2019-03-02  110.5895  81.9983   103.2327  91.9318
2019-03-03  110.0975  81.0477   104.314   93.0528
2019-03-04  110.5034  82.8025   104.903   94.0152
2019-03-05  109.8331  82.0428   104.435   92.3469
2019-03-06  107.7573  83.0049   103.8109  93.15

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A         B        C        D
2018-06-28  100.0176  100.551  98.9326  99.7118

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A         B        C        D
2018-06-28  100.0176  100.551  98.9326  99.7118

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  100.0176
2018-06-29  101.313
2018-06-30  101.8708
2018-07-01  102.854
2018-07-02  103.1628
2018-07-03  103.9191
2018-07-04  103.7097
⋮
2019-02-27  109.5239
2019-02-28  107.4943
2019-03-01  108.5184
2019-03-02  110.5895
2019-03-03  110.0975
2019-03-04  110.5034
2019-03-05  109.8331
2019-03-06  107.7573

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-06-28 to 2018-06-28

Index       A
2018-06-28  100.0176</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  100.3661  99.1748   99.1247   101.6182
2018-06-29  102.0881  99.3156   99.7062   102.5456
2018-06-30  101.798   98.6931   100.2219  102.2073
2018-07-01  102.8092  99.2141   99.9418   102.0406
2018-07-02  101.1595  98.418    98.0036   100.7439
2018-07-03  101.8806  97.8978   98.8227   99.1042
2018-07-04  101.6015  99.199    99.2175   96.7051
⋮
2019-02-27  96.9353   102.9131  114.6545  79.2784
2019-02-28  97.4994   102.9011  115.102   79.5391
2019-03-01  97.9126   102.6705  113.4208  78.9214
2019-03-02  97.3677   103.1244  113.3441  79.2233
2019-03-03  95.7934   103.3864  111.3946  79.6344
2019-03-04  97.7174   101.515   112.9517  77.9302
2019-03-05  99.1757   99.9348   113.1417  78.047
2019-03-06  99.7258   100.0328  113.3047  77.566

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  100.3661  99.1748   99.1247   101.6182
2018-06-29  102.0881  99.3156   99.7062   102.5456
2018-06-30  101.798   98.6931   100.2219  102.2073
2018-07-01  102.8092  99.2141   99.9418   102.0406
2018-07-02  101.1595  98.418    98.0036   100.7439
2018-07-03  101.8806  97.8978   98.8227   99.1042
2018-07-04  101.6015  99.199    99.2175   96.7051
⋮
2019-02-27  96.9353   102.9131  114.6545  79.2784
2019-02-28  97.4994   102.9011  115.102   79.5391
2019-03-01  97.9126   102.6705  113.4208  78.9214
2019-03-02  97.3677   103.1244  113.3441  79.2233
2019-03-03  95.7934   103.3864  111.3946  79.6344
2019-03-04  97.7174   101.515   112.9517  77.9302
2019-03-05  99.1757   99.9348   113.1417  78.047
2019-03-06  99.7258   100.0328  113.3047  77.566

julia&gt; X[rand(Bool, size(X,1)), 1]
125x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-03

Index       A
2018-06-28  100.3661
2018-06-30  101.798
2018-07-02  101.1595
2018-07-04  101.6015
2018-07-07  101.2658
2018-07-10  102.3245
2018-07-14  104.3961
⋮
2019-02-19  98.7566
2019-02-20  98.1528
2019-02-24  97.6024
2019-02-26  96.3918
2019-02-27  96.9353
2019-03-01  97.9126
2019-03-02  97.3677
2019-03-03  95.7934

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
120x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  100.3661
2018-06-30  101.798
2018-07-02  101.1595
2018-07-08  102.0368
2018-07-09  101.9068
2018-07-10  102.3245
2018-07-11  101.3817
⋮
2019-02-20  98.1528
2019-02-21  97.3434
2019-02-23  98.191
2019-03-01  97.9126
2019-03-02  97.3677
2019-03-03  95.7934
2019-03-04  97.7174
2019-03-06  99.7258</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A        B         C         D
2018-06-28  98.9997  101.2424  99.0503   99.6364
2018-06-29  98.8309  100.8362  98.5257   98.4173
2018-06-30  98.921   100.7472  99.8045   97.8713
2018-07-01  99.7022  97.9421   101.2185  96.8806
2018-07-02  97.8417  98.326    102.8519  96.8175
2018-07-03  96.7795  99.0283   102.9371  96.7804
2018-07-04  96.3394  98.8027   102.8252  95.563
⋮
2019-02-27  83.3196  83.1931   112.4816  94.2954
2019-02-28  82.1703  82.4299   112.1365  94.4851
2019-03-01  83.7079  82.0095   111.4342  96.072
2019-03-02  84.0036  82.3079   111.7302  95.2642
2019-03-03  83.7381  83.5679   113.7954  94.0132
2019-03-04  83.5429  85.3911   115.6735  95.0938
2019-03-05  83.4287  84.5362   115.5388  94.3339
2019-03-06  82.7273  85.0163   114.8346  95.5428

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-06-28 to 2018-07-07

Index       A        B         C         D
2018-06-28  98.9997  101.2424  99.0503   99.6364
2018-06-29  98.8309  100.8362  98.5257   98.4173
2018-06-30  98.921   100.7472  99.8045   97.8713
2018-07-01  99.7022  97.9421   101.2185  96.8806
2018-07-02  97.8417  98.326    102.8519  96.8175
2018-07-03  96.7795  99.0283   102.9371  96.7804
2018-07-04  96.3394  98.8027   102.8252  95.563
2018-07-05  95.9642  98.5592   103.6284  96.7823
2018-07-06  96.3906  98.5983   104.3983  95.5979
2018-07-07  95.5201  99.248    104.5795  96.1133

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-11-26 to 2019-03-06

Index       B        C
2018-11-26  91.2308  97.7205
2018-11-27  91.3964  97.3684
2018-11-28  91.6952  97.2886
2018-11-29  91.0831  97.9105
2018-11-30  90.3611  98.8819
2018-12-01  90.2486  98.9299
2018-12-02  90.5468  97.7121
⋮
2019-02-27  83.1931  112.4816
2019-02-28  82.4299  112.1365
2019-03-01  82.0095  111.4342
2019-03-02  82.3079  111.7302
2019-03-03  83.5679  113.7954
2019-03-04  85.3911  115.6735
2019-03-05  84.5362  115.5388
2019-03-06  85.0163  114.8346

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-03-06 to 2019-03-06

Index       B        C         D
2019-03-06  85.0163  114.8346  95.5428</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A         B         C         D
2018-06-28  99.9113   100.4844  101.6519  98.9862
2018-06-29  100.7097  99.8515   102.9675  98.8128
2018-06-30  99.9586   100.4611  102.4206  98.2631
2018-07-01  99.4567   99.5786   102.5076  97.8469
2018-07-02  98.9004   98.9009   104.4586  98.5191
2018-07-03  98.3611   98.6908   104.0683  99.3339
2018-07-04  98.6018   97.7892   103.6514  99.7063
⋮
2019-02-27  115.6665  100.8667  108.2903  86.5848
2019-02-28  116.8593  101.1205  107.853   87.3071
2019-03-01  117.0742  100.9742  108.7136  87.112
2019-03-02  117.6436  101.9386  108.7013  86.6691
2019-03-03  117.2475  102.4734  108.0719  85.7313
2019-03-04  117.0672  102.9244  108.835   84.6473
2019-03-05  116.4687  101.8393  109.3938  84.5095
2019-03-06  116.2993  102.2506  109.5456  85.0689

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       A
2018-06-28  99.9113
2018-06-29  100.7097
2018-06-30  99.9586
2018-07-01  99.4567
2018-07-02  98.9004
2018-07-03  98.3611
2018-07-04  98.6018
⋮
2019-02-27  115.6665
2019-02-28  116.8593
2019-03-01  117.0742
2019-03-02  117.6436
2019-03-03  117.2475
2019-03-04  117.0672
2019-03-05  116.4687
2019-03-06  116.2993

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-06-28 to 2019-03-06

Index       B         D
2018-06-28  100.4844  98.9862
2018-06-29  99.8515   98.8128
2018-06-30  100.4611  98.2631
2018-07-01  99.5786   97.8469
2018-07-02  98.9009   98.5191
2018-07-03  98.6908   99.3339
2018-07-04  97.7892   99.7063
⋮
2019-02-27  100.8667  86.5848
2019-02-28  101.1205  87.3071
2019-03-01  100.9742  87.112
2019-03-02  101.9386  86.6691
2019-03-03  102.4734  85.7313
2019-03-04  102.9244  84.6473
2019-03-05  101.8393  84.5095
2019-03-06  102.2506  85.0689</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  100.9986  97.9788   100.1383  99.525
2016-01-02  102.1128  96.2519   99.8888   100.5418
2016-01-03  101.9508  96.5901   99.7397   101.5284
2016-01-04  101.5893  98.8486   99.1717   102.0738
2016-01-05  101.0659  97.7948   97.19     103.3029
2016-01-06  101.5782  97.7577   97.0043   102.7588
2016-01-07  101.0534  98.0601   96.8438   101.9326
⋮
2017-12-24  116.7316  77.8233   100.0691  94.5394
2017-12-25  117.6524  78.0329   98.1959   94.6274
2017-12-26  117.5032  77.5474   98.617    95.2572
2017-12-27  116.8415  77.5476   98.0145   96.2889
2017-12-28  116.0404  78.4855   97.0041   98.117
2017-12-29  116.8102  79.0507   97.2235   99.9857
2017-12-30  116.2119  79.3741   98.5987   99.6536
2017-12-31  116.6439  79.7712   99.4446   101.6214

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B        C        D
2017-07-01  101.5133  90.8361  99.1063  80.4248

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  100.9986  97.9788   100.1383  99.525
2016-01-02  102.1128  96.2519   99.8888   100.5418
2016-01-03  101.9508  96.5901   99.7397   101.5284
2016-01-04  101.5893  98.8486   99.1717   102.0738
2016-01-05  101.0659  97.7948   97.19     103.3029
2016-01-06  101.5782  97.7577   97.0043   102.7588
2016-01-07  101.0534  98.0601   96.8438   101.9326
⋮
2016-12-24  82.6476   99.5407   109.0945  105.9747
2016-12-25  83.2511   100.8125  108.7532  104.7032
2016-12-26  84.3365   101.0994  108.2791  103.7157
2016-12-27  84.6355   100.8594  106.8507  104.0786
2016-12-28  85.1398   102.0869  105.7381  104.235
2016-12-29  87.3734   101.001   104.6671  104.8005
2016-12-30  88.2006   100.1932  104.2261  104.5701
2016-12-31  87.2597   101.1423  104.0406  106.12

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
