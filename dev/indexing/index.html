<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  99.7458   100.8907  99.7386   100.115
2019-02-23  99.5956   99.8604   99.0565   101.0084
2019-02-24  100.1051  99.373    99.9346   100.312
2019-02-25  101.4627  99.4046   99.7044   100.473
2019-02-26  100.5715  100.8732  98.6832   100.2928
2019-02-27  100.1032  101.2327  98.1239   101.3899
2019-02-28  99.5935   102.4901  98.6922   101.7707
⋮
2019-10-24  95.353    104.0009  126.6806  74.8947
2019-10-25  97.1107   103.6034  126.2779  75.9863
2019-10-26  96.6343   103.756   125.8196  77.1129
2019-10-27  97.5946   103.4212  125.5072  78.5851
2019-10-28  98.3904   105.1147  125.1755  79.5614
2019-10-29  98.5749   104.3996  124.1093  80.6633
2019-10-30  100.0843  105.5792  124.9573  79.5548
2019-10-31  99.2526   106.0265  124.71    79.6561

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A        B         C        D
2019-02-22  99.7458  100.8907  99.7386  100.115

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A        B         C        D
2019-02-22  99.7458  100.8907  99.7386  100.115

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  99.7458
2019-02-23  99.5956
2019-02-24  100.1051
2019-02-25  101.4627
2019-02-26  100.5715
2019-02-27  100.1032
2019-02-28  99.5935
⋮
2019-10-24  95.353
2019-10-25  97.1107
2019-10-26  96.6343
2019-10-27  97.5946
2019-10-28  98.3904
2019-10-29  98.5749
2019-10-30  100.0843
2019-10-31  99.2526

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-02-22

Index       A
2019-02-22  99.7458</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A        B         C         D
2019-02-22  99.8229  99.5632   100.0047  100.2084
2019-02-23  98.3867  99.7813   100.93    100.2875
2019-02-24  97.9997  100.1845  100.1983  100.0875
2019-02-25  97.6681  100.0937  100.6398  99.9083
2019-02-26  98.5286  102.6334  99.4381   101.0295
2019-02-27  99.4537  102.2545  98.8371   100.2506
2019-02-28  98.713   102.5979  99.7568   99.162
⋮
2019-10-24  90.4941  90.653    94.5208   64.2395
2019-10-25  91.7085  89.509    93.3622   62.6228
2019-10-26  93.213   90.1159   93.5678   61.276
2019-10-27  94.5471  90.1247   93.1394   60.4497
2019-10-28  93.9302  91.6812   93.6507   59.2944
2019-10-29  95.456   91.1645   92.7948   59.6699
2019-10-30  96.1434  91.0079   93.0267   61.727
2019-10-31  96.4735  91.6227   93.5337   60.2846

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A        B         C         D
2019-02-22  99.8229  99.5632   100.0047  100.2084
2019-02-23  98.3867  99.7813   100.93    100.2875
2019-02-24  97.9997  100.1845  100.1983  100.0875
2019-02-25  97.6681  100.0937  100.6398  99.9083
2019-02-26  98.5286  102.6334  99.4381   101.0295
2019-02-27  99.4537  102.2545  98.8371   100.2506
2019-02-28  98.713   102.5979  99.7568   99.162
⋮
2019-10-24  90.4941  90.653    94.5208   64.2395
2019-10-25  91.7085  89.509    93.3622   62.6228
2019-10-26  93.213   90.1159   93.5678   61.276
2019-10-27  94.5471  90.1247   93.1394   60.4497
2019-10-28  93.9302  91.6812   93.6507   59.2944
2019-10-29  95.456   91.1645   92.7948   59.6699
2019-10-30  96.1434  91.0079   93.0267   61.727
2019-10-31  96.4735  91.6227   93.5337   60.2846

julia&gt; X[rand(Bool, size(X,1)), 1]
115x1 TS{Float64,Dates.Date}: 2019-02-25 to 2019-10-31

Index       A
2019-02-25  97.6681
2019-03-02  97.513
2019-03-07  97.5353
2019-03-08  96.9871
2019-03-10  95.9009
2019-03-11  96.9295
2019-03-16  96.1873
⋮
2019-10-02  93.7924
2019-10-05  93.9521
2019-10-06  91.992
2019-10-13  91.7562
2019-10-16  92.2127
2019-10-20  92.0776
2019-10-21  92.4972
2019-10-31  96.4735

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
138x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  99.8229
2019-02-26  98.5286
2019-03-01  98.3579
2019-03-02  97.513
2019-03-03  98.7163
2019-03-04  97.7987
2019-03-05  97.579
⋮
2019-10-21  92.4972
2019-10-22  91.3617
2019-10-23  89.5814
2019-10-24  90.4941
2019-10-25  91.7085
2019-10-28  93.9302
2019-10-30  96.1434
2019-10-31  96.4735</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  100.5415  99.6556   99.9147   98.7462
2019-02-23  100.8915  99.6017   98.9142   99.0039
2019-02-24  101.4742  100.4967  97.3875   98.0455
2019-02-25  102.8594  97.1425   96.9101   97.3497
2019-02-26  103.1576  96.433    96.2569   99.2916
2019-02-27  102.7656  97.418    98.1052   98.5667
2019-02-28  104.0229  96.3606   97.7463   99.9533
⋮
2019-10-24  124.724   95.4938   83.8097   99.5263
2019-10-25  123.6683  95.6917   85.2873   98.9174
2019-10-26  124.1132  96.3472   83.6426   98.8567
2019-10-27  123.3219  96.3296   85.86     97.9208
2019-10-28  124.5745  96.6359   85.9925   98.3812
2019-10-29  124.699   97.3032   83.7894   101.2927
2019-10-30  122.6415  95.765    82.5224   101.4696
2019-10-31  122.31    96.1551   82.6064   101.8554

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-03-03

Index       A         B         C        D
2019-02-22  100.5415  99.6556   99.9147  98.7462
2019-02-23  100.8915  99.6017   98.9142  99.0039
2019-02-24  101.4742  100.4967  97.3875  98.0455
2019-02-25  102.8594  97.1425   96.9101  97.3497
2019-02-26  103.1576  96.433    96.2569  99.2916
2019-02-27  102.7656  97.418    98.1052  98.5667
2019-02-28  104.0229  96.3606   97.7463  99.9533
2019-03-01  103.4923  96.7668   98.0969  99.0088
2019-03-02  102.125   96.601    99.0877  101.6452
2019-03-03  101.6011  96.2437   100.473  101.2119

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2019-07-23 to 2019-10-31

Index       B        C
2019-07-23  97.3744  101.6192
2019-07-24  96.4927  101.9264
2019-07-25  96.8961  101.9511
2019-07-26  96.3503  100.787
2019-07-27  95.9703  99.4414
2019-07-28  97.3091  98.2292
2019-07-29  97.1482  98.2163
⋮
2019-10-24  95.4938  83.8097
2019-10-25  95.6917  85.2873
2019-10-26  96.3472  83.6426
2019-10-27  96.3296  85.86
2019-10-28  96.6359  85.9925
2019-10-29  97.3032  83.7894
2019-10-30  95.765   82.5224
2019-10-31  96.1551  82.6064

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-10-31 to 2019-10-31

Index       B        C        D
2019-10-31  96.1551  82.6064  101.8554</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A         B         C         D
2019-02-22  99.8689   99.3126   99.3707   100.9358
2019-02-23  99.2736   99.6551   99.6616   100.5936
2019-02-24  97.8234   100.4226  98.5772   100.9496
2019-02-25  98.7827   98.4099   96.8945   101.1832
2019-02-26  99.5873   97.9122   98.3233   100.9149
2019-02-27  99.7173   96.6314   98.4406   101.461
2019-02-28  99.2505   95.2537   99.4581   100.9088
⋮
2019-10-24  110.2833  81.6293   115.3107  80.6844
2019-10-25  111.7103  81.3899   116.5957  80.0599
2019-10-26  109.0129  79.3992   115.8149  81.0507
2019-10-27  106.4486  78.9792   115.1313  81.5247
2019-10-28  105.9584  78.4078   116.7585  81.0244
2019-10-29  105.1698  78.9941   115.26    81.8313
2019-10-30  103.95    79.6902   115.0956  82.031
2019-10-31  103.4787  79.7863   114.7871  81.5321

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       A
2019-02-22  99.8689
2019-02-23  99.2736
2019-02-24  97.8234
2019-02-25  98.7827
2019-02-26  99.5873
2019-02-27  99.7173
2019-02-28  99.2505
⋮
2019-10-24  110.2833
2019-10-25  111.7103
2019-10-26  109.0129
2019-10-27  106.4486
2019-10-28  105.9584
2019-10-29  105.1698
2019-10-30  103.95
2019-10-31  103.4787

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2019-02-22 to 2019-10-31

Index       B         D
2019-02-22  99.3126   100.9358
2019-02-23  99.6551   100.5936
2019-02-24  100.4226  100.9496
2019-02-25  98.4099   101.1832
2019-02-26  97.9122   100.9149
2019-02-27  96.6314   101.461
2019-02-28  95.2537   100.9088
⋮
2019-10-24  81.6293   80.6844
2019-10-25  81.3899   80.0599
2019-10-26  79.3992   81.0507
2019-10-27  78.9792   81.5247
2019-10-28  78.4078   81.0244
2019-10-29  78.9941   81.8313
2019-10-30  79.6902   82.031
2019-10-31  79.7863   81.5321</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  100.3249  101.2522  99.8215   99.9286
2016-01-02  97.9598   100.9507  100.2981  100.6916
2016-01-03  96.9967   100.9787  100.6401  101.1953
2016-01-04  96.2798   100.3326  101.8878  101.1549
2016-01-05  94.9822   100.0568  101.2013  101.1511
2016-01-06  94.9839   100.5247  100.0625  99.9951
2016-01-07  93.7619   100.7893  100.8596  99.9156
⋮
2017-12-24  152.1758  165.7061  74.1733   112.1545
2017-12-25  151.6797  165.7662  74.3506   110.6394
2017-12-26  150.3196  164.1928  72.1371   111.2541
2017-12-27  152.2142  163.5298  73.0334   111.1184
2017-12-28  151.15    164.0479  72.8062   113.0439
2017-12-29  151.8954  164.4113  73.6795   111.494
2017-12-30  151.0669  164.6226  73.9025   111.3113
2017-12-31  149.947   165.6597  73.1664   110.3549

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B         C        D
2017-07-01  142.3718  161.0419  72.8453  75.1879

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  100.3249  101.2522  99.8215   99.9286
2016-01-02  97.9598   100.9507  100.2981  100.6916
2016-01-03  96.9967   100.9787  100.6401  101.1953
2016-01-04  96.2798   100.3326  101.8878  101.1549
2016-01-05  94.9822   100.0568  101.2013  101.1511
2016-01-06  94.9839   100.5247  100.0625  99.9951
2016-01-07  93.7619   100.7893  100.8596  99.9156
⋮
2016-12-24  117.6902  149.5489  85.4393   75.4328
2016-12-25  116.8642  149.1818  85.1564   76.0329
2016-12-26  116.7312  150.3273  85.9544   76.2378
2016-12-27  116.2743  149.4048  86.4758   76.2225
2016-12-28  116.2106  148.7171  87.7246   74.7761
2016-12-29  117.0693  146.683   87.3229   74.2153
2016-12-30  116.6321  145.8803  86.9166   75.4368
2016-12-31  115.2465  145.6105  87.5479   75.4275

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
473x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-12-31

Index       A         B         C        D
2016-09-15  113.4555  138.1975  91.4596  84.0744
2016-09-16  113.0681  138.0786  92.2706  83.9795
2016-09-17  113.297   138.1472  92.1687  84.7735
2016-09-18  112.1909  137.9433  93.4278  83.519
2016-09-19  112.2992  139.1836  93.167   81.7359
2016-09-20  112.7014  140.1619  93.3177  81.832
2016-09-21  112.0177  140.3072  91.3464  82.2017
⋮
2017-12-24  152.1758  165.7061  74.1733  112.1545
2017-12-25  151.6797  165.7662  74.3506  110.6394
2017-12-26  150.3196  164.1928  72.1371  111.2541
2017-12-27  152.2142  163.5298  73.0334  111.1184
2017-12-28  151.15    164.0479  72.8062  113.0439
2017-12-29  151.8954  164.4113  73.6795  111.494
2017-12-30  151.0669  164.6226  73.9025  111.3113
2017-12-31  149.947   165.6597  73.1664  110.3549

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
548x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-07-01

Index       A         B         C         D
2016-01-01  100.3249  101.2522  99.8215   99.9286
2016-01-02  97.9598   100.9507  100.2981  100.6916
2016-01-03  96.9967   100.9787  100.6401  101.1953
2016-01-04  96.2798   100.3326  101.8878  101.1549
2016-01-05  94.9822   100.0568  101.2013  101.1511
2016-01-06  94.9839   100.5247  100.0625  99.9951
2016-01-07  93.7619   100.7893  100.8596  99.9156
⋮
2017-06-24  143.9292  164.2967  76.8069   70.864
2017-06-25  144.5849  163.1147  76.2989   72.0409
2017-06-26  145.4199  162.6338  75.5861   74.635
2017-06-27  145.2935  161.8683  75.0136   75.435
2017-06-28  145.7822  159.8218  74.2035   74.9265
2017-06-29  144.8172  161.8703  74.6533   74.8644
2017-06-30  144.4051  161.5205  75.0307   75.3343
2017-07-01  142.3718  161.0419  72.8453   75.1879

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
290x4 TS{Float64,Dates.Date}: 2016-09-15 to 2017-07-01

Index       A         B         C        D
2016-09-15  113.4555  138.1975  91.4596  84.0744
2016-09-16  113.0681  138.0786  92.2706  83.9795
2016-09-17  113.297   138.1472  92.1687  84.7735
2016-09-18  112.1909  137.9433  93.4278  83.519
2016-09-19  112.2992  139.1836  93.167   81.7359
2016-09-20  112.7014  140.1619  93.3177  81.832
2016-09-21  112.0177  140.3072  91.3464  82.2017
⋮
2017-06-24  143.9292  164.2967  76.8069  70.864
2017-06-25  144.5849  163.1147  76.2989  72.0409
2017-06-26  145.4199  162.6338  75.5861  74.635
2017-06-27  145.2935  161.8683  75.0136  75.435
2017-06-28  145.7822  159.8218  74.2035  74.9265
2017-06-29  144.8172  161.8703  74.6533  74.8644
2017-06-30  144.4051  161.5205  75.0307  75.3343
2017-07-01  142.3718  161.0419  72.8453  75.1879</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
