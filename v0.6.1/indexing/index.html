<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Subsetting · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li class="current"><a class="toctext" href>Subsetting</a><ul class="internal"><li><a class="toctext" href="#Overview-1">Overview</a></li><li><a class="toctext" href="#Numerical-Indexing-1">Numerical Indexing</a></li><li><a class="toctext" href="#Symbol-Indexing-1">Symbol Indexing</a></li><li><a class="toctext" href="#String-Indexing-1">String Indexing</a></li></ul></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Data</li><li><a href>Subsetting</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/indexing.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Subsetting</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Indexing-1" href="#Indexing-1">Indexing</a></h1><h2><a class="nav-anchor" id="Overview-1" href="#Overview-1">Overview</a></h2><p>One of the chief aims of the <code>Temporal.jl</code> package is to simplify the process of extracting a desired subset from a time series dataset. To that end, there are quite a few different methods by which one can index specific rows/columns of a <code>TS</code> object.</p><p>One goal has been to keep as much of the relevant indexing operations from the base <code>Array</code> type as possible to maintain consistency. However, there are certain indexing idioms that are specifically more familiar and meaningful to tabular time series data, particularly when prototyping in the REPL.</p><p>In other words, if you want to use standard <code>Array</code> indexing syntax, it should work as you would expect, but you should also be able to essentially say, &quot;give me all the observations from the year <em>2017</em> in the <em>price</em> column.&quot;</p><h2><a class="nav-anchor" id="Numerical-Indexing-1" href="#Numerical-Indexing-1">Numerical Indexing</a></h2><h3><a class="nav-anchor" id="Integer-1" href="#Integer-1">Integer</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  100.1151  98.7629   99.8885   99.2498
2018-07-11  100.6278  99.3604   97.6157   99.8547
2018-07-12  99.9767   99.9319   98.8387   100.8422
2018-07-13  99.3861   101.3821  99.4762   101.5894
2018-07-14  98.9926   102.1501  99.615    102.7394
2018-07-15  99.478    101.9431  101.035   102.9555
2018-07-16  97.8977   103.582   101.4436  102.2052
⋮
2019-03-11  82.1494   92.4435   99.1491   104.989
2019-03-12  84.58     91.7736   98.4938   104.519
2019-03-13  83.2546   92.1848   97.8289   105.8283
2019-03-14  81.2131   91.8829   98.2164   106.1065
2019-03-15  82.2215   91.1091   98.0917   105.8528
2019-03-16  83.19     90.6772   99.3259   107.0324
2019-03-17  84.0594   91.8923   99.1983   105.8209
2019-03-18  85.705    93.5455   99.1567   106.7506

julia&gt; X[1]
1x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A         B        C        D
2018-07-10  100.1151  98.7629  99.8885  99.2498

julia&gt; X[1, :]
1x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A         B        C        D
2018-07-10  100.1151  98.7629  99.8885  99.2498

julia&gt; X[:, 1]
252x1 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A
2018-07-10  100.1151
2018-07-11  100.6278
2018-07-12  99.9767
2018-07-13  99.3861
2018-07-14  98.9926
2018-07-15  99.478
2018-07-16  97.8977
⋮
2019-03-11  82.1494
2019-03-12  84.58
2019-03-13  83.2546
2019-03-14  81.2131
2019-03-15  82.2215
2019-03-16  83.19
2019-03-17  84.0594
2019-03-18  85.705

julia&gt; X[1, 1]
1x1 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-10

Index       A
2018-07-10  100.1151</code></pre><h3><a class="nav-anchor" id="Boolean-1" href="#Boolean-1">Boolean</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  101.5251  100.3301  98.5394   101.228
2018-07-11  101.8031  100.0374  98.4051   100.0797
2018-07-12  100.8595  98.7856   97.0435   100.4565
2018-07-13  101.8461  98.0008   97.4099   101.0486
2018-07-14  101.7452  97.3624   97.2982   100.8095
2018-07-15  101.451   98.8753   98.8385   100.6635
2018-07-16  101.2163  98.4346   97.6806   101.7161
⋮
2019-03-11  81.8359   100.8004  101.6899  90.2372
2019-03-12  80.9882   100.5346  101.246   88.5076
2019-03-13  81.2648   100.1402  101.6218  89.6796
2019-03-14  80.4517   100.8103  101.1697  89.661
2019-03-15  80.0332   101.4673  99.6326   89.5537
2019-03-16  81.719    101.7084  100.7714  90.0379
2019-03-17  81.1049   101.0177  99.4108   89.9807
2019-03-18  81.137    100.7688  98.6975   91.1524

julia&gt; X[trues(size(X,1)), :]
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  101.5251  100.3301  98.5394   101.228
2018-07-11  101.8031  100.0374  98.4051   100.0797
2018-07-12  100.8595  98.7856   97.0435   100.4565
2018-07-13  101.8461  98.0008   97.4099   101.0486
2018-07-14  101.7452  97.3624   97.2982   100.8095
2018-07-15  101.451   98.8753   98.8385   100.6635
2018-07-16  101.2163  98.4346   97.6806   101.7161
⋮
2019-03-11  81.8359   100.8004  101.6899  90.2372
2019-03-12  80.9882   100.5346  101.246   88.5076
2019-03-13  81.2648   100.1402  101.6218  89.6796
2019-03-14  80.4517   100.8103  101.1697  89.661
2019-03-15  80.0332   101.4673  99.6326   89.5537
2019-03-16  81.719    101.7084  100.7714  90.0379
2019-03-17  81.1049   101.0177  99.4108   89.9807
2019-03-18  81.137    100.7688  98.6975   91.1524

julia&gt; X[rand(Bool, size(X,1)), 1]
136x1 TS{Float64,Dates.Date}: 2018-07-11 to 2019-03-18

Index       A
2018-07-11  101.8031
2018-07-13  101.8461
2018-07-18  100.0099
2018-07-19  100.1907
2018-07-21  98.9396
2018-07-23  98.0092
2018-07-24  97.5747
⋮
2019-03-06  81.6964
2019-03-07  82.4735
2019-03-10  82.4088
2019-03-12  80.9882
2019-03-13  81.2648
2019-03-14  80.4517
2019-03-16  81.719
2019-03-18  81.137

julia&gt; X[rand(Bool, size(X,1)), [true, false, false, false]]
124x1 TS{Float64,Dates.Date}: 2018-07-15 to 2019-03-18

Index       A
2018-07-15  101.451
2018-07-16  101.2163
2018-07-18  100.0099
2018-07-28  97.7743
2018-07-30  97.9445
2018-08-02  101.4343
2018-08-04  101.3431
⋮
2019-03-11  81.8359
2019-03-12  80.9882
2019-03-13  81.2648
2019-03-14  80.4517
2019-03-15  80.0332
2019-03-16  81.719
2019-03-17  81.1049
2019-03-18  81.137</code></pre><h3><a class="nav-anchor" id="Arrays-and-Ranges-1" href="#Arrays-and-Ranges-1">Arrays &amp; Ranges</a></h3><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  101.0272  99.4189   100.0636  99.3379
2018-07-11  100.9316  99.2082   99.3343   98.2965
2018-07-12  101.0485  99.4186   98.0647   96.6793
2018-07-13  101.2258  101.7784  97.3288   96.3183
2018-07-14  101.2162  103.5202  97.5875   95.577
2018-07-15  102.1248  103.3658  96.1313   96.7883
2018-07-16  101.932   102.7656  96.8584   96.4966
⋮
2019-03-11  120.1025  104.3128  104.4725  86.8296
2019-03-12  119.3679  103.2635  104.1758  87.1963
2019-03-13  118.1048  104.6695  102.9137  83.9601
2019-03-14  117.8708  105.2324  104.8321  83.3512
2019-03-15  118.6273  105.0357  104.3321  84.1726
2019-03-16  119.8809  105.4368  104.7399  83.8156
2019-03-17  119.1327  104.5735  105.6113  83.855
2019-03-18  118.1469  105.381   104.3364  82.2857

julia&gt; X[1:10, :]
10x4 TS{Float64,Dates.Date}: 2018-07-10 to 2018-07-19

Index       A         B         C         D
2018-07-10  101.0272  99.4189   100.0636  99.3379
2018-07-11  100.9316  99.2082   99.3343   98.2965
2018-07-12  101.0485  99.4186   98.0647   96.6793
2018-07-13  101.2258  101.7784  97.3288   96.3183
2018-07-14  101.2162  103.5202  97.5875   95.577
2018-07-15  102.1248  103.3658  96.1313   96.7883
2018-07-16  101.932   102.7656  96.8584   96.4966
2018-07-17  102.2052  105.2241  97.07     94.1401
2018-07-18  100.1768  105.5167  95.522    94.553
2018-07-19  99.3973   104.1163  98.639    93.5786

julia&gt; X[end-100:end, 2:3]
101x2 TS{Float64,Dates.Date}: 2018-12-08 to 2019-03-18

Index       B         C
2018-12-08  118.4087  100.5101
2018-12-09  120.4937  99.4641
2018-12-10  120.1893  98.046
2018-12-11  120.992   98.8225
2018-12-12  121.3424  98.523
2018-12-13  120.5022  98.7498
2018-12-14  120.9216  98.5859
⋮
2019-03-11  104.3128  104.4725
2019-03-12  103.2635  104.1758
2019-03-13  104.6695  102.9137
2019-03-14  105.2324  104.8321
2019-03-15  105.0357  104.3321
2019-03-16  105.4368  104.7399
2019-03-17  104.5735  105.6113
2019-03-18  105.381   104.3364

julia&gt; X[end, 2:end]
1x3 TS{Float64,Dates.Date}: 2019-03-18 to 2019-03-18

Index       B        C         D
2019-03-18  105.381  104.3364  82.2857</code></pre><h2><a class="nav-anchor" id="Symbol-Indexing-1" href="#Symbol-Indexing-1">Symbol Indexing</a></h2><p>You can also index specific columns you want using the <code>fields</code> member of the <code>TS</code> object, so that columns can be fetched by name rather than by numerical index.</p><pre><code class="language-julia-repl">julia&gt; using Temporal

julia&gt; X = TS(cumsum(randn(252, 4), dims=1)) + 100.0
252x4 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A         B         C         D
2018-07-10  99.0176   101.0916  100.2762  100.6702
2018-07-11  99.2605   102.5714  100.065   100.5607
2018-07-12  98.0605   100.8168  101.6689  101.0091
2018-07-13  99.6991   100.414   102.1433  102.0965
2018-07-14  99.4715   101.6328  101.9858  102.2676
2018-07-15  99.6371   100.5339  101.7088  101.9936
2018-07-16  98.3747   101.0726  101.3935  101.6738
⋮
2019-03-11  110.0393  101.8159  106.5258  101.2618
2019-03-12  109.3528  103.109   108.1842  100.5116
2019-03-13  108.8374  103.9364  108.1635  100.0449
2019-03-14  108.1714  103.5858  109.3525  103.267
2019-03-15  108.7669  104.3062  109.3818  103.0798
2019-03-16  109.3906  102.7713  109.0802  102.7093
2019-03-17  108.8238  104.2275  110.0289  102.539
2019-03-18  109.1124  105.4642  110.3352  102.0681

julia&gt; X[:, :A]
252x1 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       A
2018-07-10  99.0176
2018-07-11  99.2605
2018-07-12  98.0605
2018-07-13  99.6991
2018-07-14  99.4715
2018-07-15  99.6371
2018-07-16  98.3747
⋮
2019-03-11  110.0393
2019-03-12  109.3528
2019-03-13  108.8374
2019-03-14  108.1714
2019-03-15  108.7669
2019-03-16  109.3906
2019-03-17  108.8238
2019-03-18  109.1124

julia&gt; X[:, [:B, :D]]
252x2 TS{Float64,Dates.Date}: 2018-07-10 to 2019-03-18

Index       B         D
2018-07-10  101.0916  100.6702
2018-07-11  102.5714  100.5607
2018-07-12  100.8168  101.0091
2018-07-13  100.414   102.0965
2018-07-14  101.6328  102.2676
2018-07-15  100.5339  101.9936
2018-07-16  101.0726  101.6738
⋮
2019-03-11  101.8159  101.2618
2019-03-12  103.109   100.5116
2019-03-13  103.9364  100.0449
2019-03-14  103.5858  103.267
2019-03-15  104.3062  103.0798
2019-03-16  102.7713  102.7093
2019-03-17  104.2275  102.539
2019-03-18  105.4642  102.0681</code></pre><h2><a class="nav-anchor" id="String-Indexing-1" href="#String-Indexing-1">String Indexing</a></h2><p>One of the more powerful features of Temporal&#39;s indexing functionality is that you can index rows of a <code>TS</code> object using <code>String</code>s formatted in such a way as to express specific periods of time in a natural idiomatic way. (If you have used the <code>xts</code> package in R this functionality will feel very familiar.)</p><pre><code class="language-julia-repl">julia&gt; using Dates, Temporal

julia&gt; t = Date(2016,1,1):Day(1):Date(2017,12,31)
2016-01-01:1 day:2017-12-31

julia&gt; X = TS(cumsum(randn(length(t), 4), dims=1), t) + 100.0
731x4 TS{Float64,Dates.Date}: 2016-01-01 to 2017-12-31

Index       A         B         C         D
2016-01-01  99.3919   100.0247  98.4585   97.2953
2016-01-02  97.6387   98.1112   97.4628   96.6359
2016-01-03  95.8055   97.4971   98.042    95.0489
2016-01-04  96.8231   97.162    98.2801   94.095
2016-01-05  96.6544   97.2467   98.5326   94.9793
2016-01-06  95.9192   96.8146   100.1112  94.0095
2016-01-07  97.1822   96.3359   99.0323   94.1981
⋮
2017-12-24  111.3968  86.7561   72.3309   111.3783
2017-12-25  111.5611  88.1343   71.8207   110.9491
2017-12-26  112.2335  88.6153   71.0036   111.3476
2017-12-27  111.6964  88.291    71.9026   111.2697
2017-12-28  110.2086  88.8494   72.2698   110.0308
2017-12-29  111.6229  89.5938   74.2619   109.4507
2017-12-30  110.1981  90.5383   73.6592   107.9807
2017-12-31  110.1933  90.0269   71.716    106.1388

julia&gt; X[&quot;2017-07-01&quot;]  # single day
1x4 TS{Float64,Dates.Date}: 2017-07-01 to 2017-07-01

Index       A         B        C        D
2017-07-01  124.7027  91.5891  79.3487  101.0691

julia&gt; X[&quot;2016&quot;]  # whole year
366x4 TS{Float64,Dates.Date}: 2016-01-01 to 2016-12-31

Index       A         B         C         D
2016-01-01  99.3919   100.0247  98.4585   97.2953
2016-01-02  97.6387   98.1112   97.4628   96.6359
2016-01-03  95.8055   97.4971   98.042    95.0489
2016-01-04  96.8231   97.162    98.2801   94.095
2016-01-05  96.6544   97.2467   98.5326   94.9793
2016-01-06  95.9192   96.8146   100.1112  94.0095
2016-01-07  97.1822   96.3359   99.0323   94.1981
⋮
2016-12-24  136.5405  93.6921   62.4808   109.0824
2016-12-25  136.8101  93.7168   61.5218   110.049
2016-12-26  136.8195  93.851    62.6983   108.5786
2016-12-27  137.0325  92.9108   63.0306   108.093
2016-12-28  137.0406  93.8077   64.6378   107.1481
2016-12-29  136.714   93.8188   65.3307   106.1922
2016-12-30  136.6399  93.7804   64.0347   105.5759
2016-12-31  135.6058  93.8218   65.6442   105.6621

julia&gt; X[&quot;2016-09-15/&quot;]  # everything after a specific day
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/

julia&gt; X[&quot;/2017-07-01&quot;]  # everything up through a specific month
ERROR: AssertionError: Invalid indexing string: Unable to parse /2017-07-01

julia&gt; X[&quot;2016-09-15/2017-07-01&quot;]  # mix &amp; match
ERROR: AssertionError: Invalid indexing string: Unable to parse 2016-09-15/2017-07-01</code></pre><footer><hr/><a class="previous" href="../io/"><span class="direction">Previous</span><span class="title">I/O</span></a><a class="next" href="../combining/"><span class="direction">Next</span><span class="title">Combining</span></a></footer></article></body></html>
