<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Aggregation · Temporal</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Temporal</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li><span class="toctext">Calculations</span><ul><li><a class="toctext" href="../calculation/">Methods</a></li><li class="current"><a class="toctext" href>Aggregation</a><ul class="internal"><li><a class="toctext" href="#Sampling-1">Sampling</a></li><li><a class="toctext" href="#Collapsing-1">Collapsing</a></li><li><a class="toctext" href="#Summarizing-1">Summarizing</a></li></ul></li></ul></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../io/">I/O</a></li><li><a class="toctext" href="../indexing/">Subsetting</a></li><li><a class="toctext" href="../combining/">Combining</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Calculations</li><li><a href>Aggregation</a></li></ul><a class="edit-page" href="https://github.com/dysonance/Temporal.jl/blob/master/docs/src/aggregation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Aggregation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Aggregation-1" href="#Aggregation-1">Aggregation</a></h1><h2><a class="nav-anchor" id="Sampling-1" href="#Sampling-1">Sampling</a></h2><h3><a class="nav-anchor" id="Weekdays-1" href="#Weekdays-1">Weekdays</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.mondays" href="#Temporal.mondays"><code>Temporal.mondays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">mondays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Mondays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L24-L28">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.tuesdays" href="#Temporal.tuesdays"><code>Temporal.tuesdays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">tuesdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Tuesdays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L31-L35">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.wednesdays" href="#Temporal.wednesdays"><code>Temporal.wednesdays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">wednesdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Wednesdays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L38-L42">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.thursdays" href="#Temporal.thursdays"><code>Temporal.thursdays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">thursdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Thursdays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L45-L49">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.fridays" href="#Temporal.fridays"><code>Temporal.fridays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">fridays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Fridays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L52-L56">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.saturdays" href="#Temporal.saturdays"><code>Temporal.saturdays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">saturdays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Saturdays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L59-L63">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.sundays" href="#Temporal.sundays"><code>Temporal.sundays</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">sundays(x::TS)</code></pre><p>Return a time series containing all observations occuring on Sundays of the given <code>TS</code> object.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L66-L70">source</a></section><h3><a class="nav-anchor" id="Interval-Boundaries-1" href="#Interval-Boundaries-1">Interval Boundaries</a></h3><h4><a class="nav-anchor" id="Weekly-1" href="#Weekly-1">Weekly</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.bow" href="#Temporal.bow"><code>Temporal.bow</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">bow(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the weeks of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the week are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior week are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L85-L92">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.eow" href="#Temporal.eow"><code>Temporal.eow</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">eow(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the weeks of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the week are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new week are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L95-L102">source</a></section><h4><a class="nav-anchor" id="Monthly-1" href="#Monthly-1">Monthly</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.bom" href="#Temporal.bom"><code>Temporal.bom</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">bom(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the months of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the month are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior month are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L105-L112">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.eom" href="#Temporal.eom"><code>Temporal.eom</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">eom(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the months of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the month are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new month are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L115-L122">source</a></section><h4><a class="nav-anchor" id="Quarterly-1" href="#Quarterly-1">Quarterly</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.boq" href="#Temporal.boq"><code>Temporal.boq</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">boq(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the quarters of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the quarter are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior quarter are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L125-L132">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.eoq" href="#Temporal.eoq"><code>Temporal.eoq</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">eoq(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the quarters of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the quarter are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new quarter are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L135-L142">source</a></section><h4><a class="nav-anchor" id="Yearly-1" href="#Yearly-1">Yearly</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.boy" href="#Temporal.boy"><code>Temporal.boy</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">boy(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the beginnings of the years of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the year are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the previous index is a prior year are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L145-L152">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.eoy" href="#Temporal.eoy"><code>Temporal.eoy</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">eoy(x::TS; cal::Bool=false)</code></pre><p>Return a time series containing all observations occuring at the ends of the years of the input.</p><ul><li>If <code>cal</code> is <code>false</code>, only observations occurring the last calendar day of the year are returned</li><li>If <code>cal</code> is <code>true</code>, all observation for which the next index is a new year are returned</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L155-L162">source</a></section><h2><a class="nav-anchor" id="Collapsing-1" href="#Collapsing-1">Collapsing</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.collapse" href="#Temporal.collapse"><code>Temporal.collapse</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">collapse(x::TS{V,T}, at::Function; fun::Function=last, args...)::TS{V,T} where {V,T}</code></pre><p>Compute the function <code>fun</code> over period boundaries defined by <code>at</code> (e.g. <code>eom</code>, <code>boq</code>, etc.) and returng a time series of the results.</p><p>Keyword arguments (<code>args...</code>) are passed to the function <code>fun</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L184-L190">source</a></section><pre><code class="language-julia-repl">julia&gt; using Temporal, Statistics, Dates

julia&gt; X = TS(randn(100, 4))
100x4 TS{Float64,Dates.Date}: 2018-11-27 to 2019-03-06

Index       A        B        C        D
2018-11-27  -0.6731  0.1346   0.7062   1.4492
2018-11-28  0.5073   -1.7963  2.4987   0.5123
2018-11-29  1.5402   -0.6211  0.5895   -1.1703
2018-11-30  -0.4879  -1.1817  1.7008   0.1307
2018-12-01  0.0103   0.5472   -0.4373  -2.4079
2018-12-02  1.7969   0.9322   0.935    1.4514
2018-12-03  0.0204   -0.8405  -0.2689  -0.4435
⋮
2019-02-27  -0.026   0.7657   -2.0603  -0.7765
2019-02-28  -1.1533  0.4172   0.3868   0.6612
2019-03-01  -0.5636  -0.2072  0.4729   0.8722
2019-03-02  0.7491   -0.7273  1.5426   -0.3582
2019-03-03  -0.3273  -0.3109  0.1989   -2.6922
2019-03-04  0.1326   0.3203   0.6539   0.1478
2019-03-05  -0.208   -0.0648  0.2933   -1.3519
2019-03-06  0.3187   0.1668   -0.2458  -0.9865

julia&gt; collapse(X, eom, fun=mean)
4x4 TS{Float64,Dates.Date}: 2018-11-30 to 2019-02-28

Index       A       B        C        D
2018-11-30  0.2216  -0.8661  1.3738   0.2305
2018-12-31  0.0258  0.196    -0.1157  0.0271
2019-01-31  0.1489  -0.0118  -0.4069  -0.3698
2019-02-28  0.0498  0.215    -0.1967  0.1226

julia&gt; last_month = string(X.index[end])[1:7]
&quot;2019-03&quot;

julia&gt; mean(X[last_month])
-0.0906034742617361</code></pre><h2><a class="nav-anchor" id="Summarizing-1" href="#Summarizing-1">Summarizing</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Temporal.apply" href="#Temporal.apply"><code>Temporal.apply</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">apply(x::TS{V}, dim::Int=1; fun=sum) where {V}</code></pre><p>Apply function <code>fun</code> across dimension <code>dim</code> of a time series <code>x</code>.</p><ul><li>If <code>dim</code> is 1, then apply <code>fun</code> to each row of <code>x</code>, returning a time series (<code>TS</code>) object of the results</li><li>If <code>dim</code> is 2, then apply <code>fun</code> to each column of <code>x</code>, returning an <code>Array</code> of the results</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/dysonance/Temporal.jl/blob/270f21be976c64fbc6bfb054baaef3adc4a1b69b/src/collapse.jl#L196-L203">source</a></section><pre><code class="language-julia-repl">julia&gt; using Temporal, Statistics

julia&gt; X = TS(randn(100, 4))
100x4 TS{Float64,Dates.Date}: 2018-11-27 to 2019-03-06

Index       A        B        C        D
2018-11-27  -0.2595  0.1053   -0.8226  1.5342
2018-11-28  -0.361   0.4994   0.3487   -0.3253
2018-11-29  0.7563   -1.3519  -0.366   -1.1203
2018-11-30  0.2574   0.2553   1.4209   3.1548
2018-12-01  1.5216   0.3131   0.893    -1.391
2018-12-02  -0.5936  0.1432   2.2293   -0.4975
2018-12-03  0.769    -1.269   0.5974   1.4941
⋮
2019-02-27  -0.4137  -0.6026  -1.3186  -1.1843
2019-02-28  0.9433   -0.3733  1.2525   1.3248
2019-03-01  -0.4346  -1.0076  0.702    -0.9866
2019-03-02  1.7533   -1.6619  0.205    -0.0934
2019-03-03  0.5781   0.9346   -1.2177  1.1863
2019-03-04  -0.2898  0.8693   0.8615   -0.4625
2019-03-05  0.1942   0.1419   -0.3136  -0.0803
2019-03-06  -0.0304  1.0068   1.2888   1.5595

julia&gt; apply(X, 1, fun=sum)
100x1 TS{Float64,Dates.Date}: 2018-11-27 to 2019-03-06

Index       Sum
2018-11-27  0.5574
2018-11-28  0.1618
2018-11-29  -2.0818
2018-11-30  5.0884
2018-12-01  1.3367
2018-12-02  1.2815
2018-12-03  1.5915
⋮
2019-02-27  -3.5193
2019-02-28  3.1472
2019-03-01  -1.7268
2019-03-02  0.203
2019-03-03  1.4813
2019-03-04  0.9785
2019-03-05  -0.0579
2019-03-06  3.8247

julia&gt; apply(X, 2, fun=sum)
1×4 LinearAlgebra.Adjoint{Float64,Array{Float64,1}}:
 12.5648  -12.7102  17.0325  11.6794</code></pre><footer><hr/><a class="previous" href="../calculation/"><span class="direction">Previous</span><span class="title">Methods</span></a><a class="next" href="../io/"><span class="direction">Next</span><span class="title">I/O</span></a></footer></article></body></html>
